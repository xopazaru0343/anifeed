{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"AniFeed","text":"<p>Welcome to the AniFeed documentation!</p>"},{"location":"#overview","title":"Overview","text":"<p>AniFeed is a Python application for tracking anime and searching for torrents from your anime list.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Fetch anime lists from AniList or MyAnimeList</li> <li>Search for anime torrents on Nyaa.si</li> <li>Semantic similarity matching for finding relevant torrents</li> <li>Configurable torrent filters (resolution, fansub groups, etc.)</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<p>```python from anifeed.main import build_app from anifeed.constants import AnimeStatus</p>"},{"location":"#initialize-application","title":"Initialize application","text":"<p>app = build_app()</p>"},{"location":"#fetch-watching-list","title":"Fetch watching list","text":"<p>animes = app.anime_service.get_user_anime_list(     username=app.config.user,     status=AnimeStatus.WATCHING )</p>"},{"location":"#search-for-torrents","title":"Search for torrents","text":"<p>torrents = app.torrent_service.search(animes[0].title_english)</p>"},{"location":"reference/","title":"API Reference","text":"<p>Complete API documentation for the AniFeed package.</p>"},{"location":"reference/SUMMARY/","title":"SUMMARY","text":"<ul> <li>Core<ul> <li>Exceptions</li> <li>Main</li> </ul> </li> <li>Api<ul> <li>Health Controller</li> <li>Health Router</li> <li>Main</li> </ul> </li> <li>Constants<ul> <li>Anime Status Enum</li> <li>App Config</li> <li>Nyaa Search Enum</li> </ul> </li> <li>Db<ul> <li>Database</li> <li>Interfaces</li> <li>Mappers</li> <li>Sqlite Anime Repository</li> <li>Sqlite Torrent Repository</li> </ul> </li> <li>Models<ul> <li>Anime Model</li> <li>Config Model</li> <li>Nyaa Search Model</li> <li>Torrent Model</li> <li>User Model</li> </ul> </li> <li>Services<ul> <li>Anilist Api</li> <li>Anilist Parser</li> <li>Anime Service</li> <li>Anime Service Factory</li> <li>Base Api</li> <li>Base Parser</li> <li>Mal Api</li> <li>Mal Parser</li> <li>Nyaa Api</li> <li>Nyaa Parser</li> <li>Similarity Service</li> <li>Torrent Service</li> </ul> </li> <li>Utils<ul> <li>Commons</li> <li>Http Client</li> <li>Log Utils</li> </ul> </li> </ul>"},{"location":"reference/exceptions/","title":"Exceptions","text":""},{"location":"reference/exceptions/#anifeed.exceptions","title":"<code>anifeed.exceptions</code>","text":"<p>Domain-specific exceptions for better error handling and testability.</p> <p>This module defines a hierarchy of exceptions specific to the anifeed domain, enabling precise error handling and better separation of concerns.</p>"},{"location":"reference/exceptions/#anifeed.exceptions.AnifeedError","title":"<code>AnifeedError</code>","text":"<p>               Bases: <code>Exception</code></p> <p>Base exception for all anifeed-specific errors.</p> <p>All custom exceptions in this application inherit from this base class, making it easy to catch any application-specific error.</p> Example <p>try: ...     # some anifeed operation ... except AnifeedError as e: ...     logger.error(f\"Application error: {e}\")</p> Source code in <code>src/anifeed/exceptions.py</code> <pre><code>class AnifeedError(Exception):\n    \"\"\"\n    Base exception for all anifeed-specific errors.\n\n    All custom exceptions in this application inherit from this base class,\n    making it easy to catch any application-specific error.\n\n    Example:\n        &gt;&gt;&gt; try:\n        ...     # some anifeed operation\n        ... except AnifeedError as e:\n        ...     logger.error(f\"Application error: {e}\")\n    \"\"\"\n    pass\n</code></pre>"},{"location":"reference/exceptions/#anifeed.exceptions.ConfigurationError","title":"<code>ConfigurationError</code>","text":"<p>               Bases: <code>AnifeedError</code></p> <p>Raised when configuration is invalid or missing.</p> <p>Indicates problems with config.toml loading, parsing, or validation.</p> Example <p>if not config.user: ...     raise ConfigurationError(\"User not configured in config.toml\")</p> Source code in <code>src/anifeed/exceptions.py</code> <pre><code>class ConfigurationError(AnifeedError):\n    \"\"\"\n    Raised when configuration is invalid or missing.\n\n    Indicates problems with config.toml loading, parsing, or validation.\n\n    Example:\n        &gt;&gt;&gt; if not config.user:\n        ...     raise ConfigurationError(\"User not configured in config.toml\")\n    \"\"\"\n    pass\n</code></pre>"},{"location":"reference/exceptions/#anifeed.exceptions.AnimeSourceError","title":"<code>AnimeSourceError</code>","text":"<p>               Bases: <code>AnifeedError</code></p> <p>Raised when an invalid anime source is specified.</p> <p>Occurs when trying to use an anime API source that is not registered in the factory.</p> Example <p>try: ...     service = AnimeService(source=\"invalid\") ... except AnimeSourceError as e: ...     print(f\"Unknown source: {e}\")</p> Source code in <code>src/anifeed/exceptions.py</code> <pre><code>class AnimeSourceError(AnifeedError):\n    \"\"\"\n    Raised when an invalid anime source is specified.\n\n    Occurs when trying to use an anime API source that is not registered\n    in the factory.\n\n    Example:\n        &gt;&gt;&gt; try:\n        ...     service = AnimeService(source=\"invalid\")\n        ... except AnimeSourceError as e:\n        ...     print(f\"Unknown source: {e}\")\n    \"\"\"\n    pass\n</code></pre>"},{"location":"reference/exceptions/#anifeed.exceptions.TorrentSearchError","title":"<code>TorrentSearchError</code>","text":"<p>               Bases: <code>AnifeedError</code></p> <p>Raised when torrent search operations fail.</p> <p>Indicates failures during torrent site queries or search result processing.</p> Example <p>if not query.strip(): ...     raise TorrentSearchError(\"Search query cannot be empty\")</p> Source code in <code>src/anifeed/exceptions.py</code> <pre><code>class TorrentSearchError(AnifeedError):\n    \"\"\"\n    Raised when torrent search operations fail.\n\n    Indicates failures during torrent site queries or search result processing.\n\n    Example:\n        &gt;&gt;&gt; if not query.strip():\n        ...     raise TorrentSearchError(\"Search query cannot be empty\")\n    \"\"\"\n    pass\n</code></pre>"},{"location":"reference/exceptions/#anifeed.exceptions.ParsingError","title":"<code>ParsingError</code>","text":"<p>               Bases: <code>AnifeedError</code></p> <p>Raised when API response or HTML parsing fails.</p> <p>Occurs when response data is malformed or doesn't match expected structure.</p> Example <p>if not soup.find('tbody'): ...     raise ParsingError(\"Invalid HTML: missing tbody element\")</p> Source code in <code>src/anifeed/exceptions.py</code> <pre><code>class ParsingError(AnifeedError):\n    \"\"\"\n    Raised when API response or HTML parsing fails.\n\n    Occurs when response data is malformed or doesn't match expected structure.\n\n    Example:\n        &gt;&gt;&gt; if not soup.find('tbody'):\n        ...     raise ParsingError(\"Invalid HTML: missing tbody element\")\n    \"\"\"\n    pass\n</code></pre>"},{"location":"reference/exceptions/#anifeed.exceptions.NetworkError","title":"<code>NetworkError</code>","text":"<p>               Bases: <code>AnifeedError</code></p> <p>Raised when HTTP requests fail or timeout.</p> <p>Wraps network-related failures like connection errors, timeouts, or unexpected HTTP status codes.</p> Example <p>try: ...     response = api.get_data() ... except requests.RequestException as e: ...     raise NetworkError(f\"API request failed: {e}\") from e</p> Source code in <code>src/anifeed/exceptions.py</code> <pre><code>class NetworkError(AnifeedError):\n    \"\"\"\n    Raised when HTTP requests fail or timeout.\n\n    Wraps network-related failures like connection errors, timeouts,\n    or unexpected HTTP status codes.\n\n    Example:\n        &gt;&gt;&gt; try:\n        ...     response = api.get_data()\n        ... except requests.RequestException as e:\n        ...     raise NetworkError(f\"API request failed: {e}\") from e\n    \"\"\"\n    pass\n</code></pre>"},{"location":"reference/main/","title":"Main","text":""},{"location":"reference/main/#anifeed.main","title":"<code>anifeed.main</code>","text":""},{"location":"reference/api/main/","title":"Main","text":""},{"location":"reference/api/main/#anifeed.api.main","title":"<code>anifeed.api.main</code>","text":""},{"location":"reference/api/main/#anifeed.api.main.create_app","title":"<code>create_app()</code>","text":"<p>Assemble the Socketify application with all routes and dependencies.</p> Source code in <code>src/anifeed/api/main.py</code> <pre><code>def create_app() -&gt; App:\n    \"\"\"\n    Assemble the Socketify application with all routes and dependencies.\n    \"\"\"\n    app = App()\n    register_health_route(app)\n    return app\n</code></pre>"},{"location":"reference/api/main/#anifeed.api.main.run","title":"<code>run(port=8000)</code>","text":"<p>Entrypoint for running the API with Socketify.</p> Source code in <code>src/anifeed/api/main.py</code> <pre><code>def run(port: int = 8000) -&gt; None:\n    \"\"\"\n    Entrypoint for running the API with Socketify.\n    \"\"\"\n    def _on_listen(config) -&gt; None:\n        port_value = getattr(config, \"port\", None)\n        if callable(port_value):\n            try:\n                port_value = port_value()\n            except TypeError:\n                port_value = None\n        if port_value is None and hasattr(config, \"get_local_port\"):\n            try:\n                port_value = config.get_local_port()\n            except TypeError:\n                port_value = None\n        logger.info(\"AniFeed API listening on port %s\", port_value or port)\n\n    app.listen(port, _on_listen)\n    app.run()\n</code></pre>"},{"location":"reference/api/controllers/health_controller/","title":"Health Controller","text":""},{"location":"reference/api/controllers/health_controller/#anifeed.api.controllers.health_controller","title":"<code>anifeed.api.controllers.health_controller</code>","text":""},{"location":"reference/api/controllers/health_controller/#anifeed.api.controllers.health_controller.HealthController","title":"<code>HealthController</code>","text":"<p>Simple health-check controller.</p> Source code in <code>src/anifeed/api/controllers/health_controller.py</code> <pre><code>class HealthController:\n    \"\"\"\n    Simple health-check controller.\n    \"\"\"\n\n    def status(self) -&gt; dict[str, str]:\n        \"\"\"\n        Return service health information.\n        \"\"\"\n        return {\"health\": True}\n</code></pre>"},{"location":"reference/api/controllers/health_controller/#anifeed.api.controllers.health_controller.HealthController.status","title":"<code>status()</code>","text":"<p>Return service health information.</p> Source code in <code>src/anifeed/api/controllers/health_controller.py</code> <pre><code>def status(self) -&gt; dict[str, str]:\n    \"\"\"\n    Return service health information.\n    \"\"\"\n    return {\"health\": True}\n</code></pre>"},{"location":"reference/api/routers/health_router/","title":"Health Router","text":""},{"location":"reference/api/routers/health_router/#anifeed.api.routers.health_router","title":"<code>anifeed.api.routers.health_router</code>","text":""},{"location":"reference/api/routers/health_router/#anifeed.api.routers.health_router.register","title":"<code>register(app, controller=None)</code>","text":"<p>Register a simple health endpoint on the provided Socketify application.</p> Source code in <code>src/anifeed/api/routers/health_router.py</code> <pre><code>def register(app: App, controller: HealthController | None = None) -&gt; None:\n    \"\"\"\n    Register a simple health endpoint on the provided Socketify application.\n    \"\"\"\n    controller = controller or HealthController()\n\n    def get_health(res, req):\n        if res.aborted:\n            return\n\n        payload = json.dumps(controller.status())\n        res.end(payload)\n\n    app.get(\"/health\", get_health)\n</code></pre>"},{"location":"reference/constants/anime_status_enum/","title":"Anime Status Enum","text":""},{"location":"reference/constants/anime_status_enum/#anifeed.constants.anime_status_enum","title":"<code>anifeed.constants.anime_status_enum</code>","text":"<p>Anime viewing status enumeration.</p> <p>This module defines the internal representation of anime viewing statuses, independent of external API status strings.</p>"},{"location":"reference/constants/anime_status_enum/#anifeed.constants.anime_status_enum.AnimeStatus","title":"<code>AnimeStatus</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Enumeration of anime viewing statuses.</p> <p>Provides a consistent internal representation that is mapped to API-specific status strings by the API adapters.</p> Members <p>WATCHING: Currently watching PLANNING: Planning to watch COMPLETED: Finished watching DROPPED: Started but discontinued PAUSED: Temporarily paused REPEATING: Rewatching</p> Example <p>status = AnimeStatus.WATCHING if status == AnimeStatus.WATCHING: ...     print(\"Currently airing\")</p> Source code in <code>src/anifeed/constants/anime_status_enum.py</code> <pre><code>class AnimeStatus(Enum):\n    \"\"\"\n    Enumeration of anime viewing statuses.\n\n    Provides a consistent internal representation that is mapped to\n    API-specific status strings by the API adapters.\n\n    Members:\n        WATCHING: Currently watching\n        PLANNING: Planning to watch\n        COMPLETED: Finished watching\n        DROPPED: Started but discontinued\n        PAUSED: Temporarily paused\n        REPEATING: Rewatching\n\n    Example:\n        &gt;&gt;&gt; status = AnimeStatus.WATCHING\n        &gt;&gt;&gt; if status == AnimeStatus.WATCHING:\n        ...     print(\"Currently airing\")\n    \"\"\"\n    WATCHING = auto()\n    PLANNING = auto()\n    COMPLETED = auto()\n    DROPPED = auto()\n    PAUSED = auto()\n    REPEATING = auto()\n</code></pre>"},{"location":"reference/constants/app_config/","title":"App Config","text":""},{"location":"reference/constants/app_config/#anifeed.constants.app_config","title":"<code>anifeed.constants.app_config</code>","text":"<p>Application configuration loader.</p> <p>This module provides a factory function to load and parse the application configuration from config.toml.</p>"},{"location":"reference/constants/app_config/#anifeed.constants.app_config.load_application_config","title":"<code>load_application_config()</code>","text":"<p>Load application configuration from config.toml file.</p> <p>Reads the TOML configuration file and constructs immutable configuration objects. Uses MappingProxyType to prevent accidental mutation of loaded data.</p> <p>Returns:</p> Name Type Description <code>ApplicationConfig</code> <code>ApplicationConfig</code> <p>Fully populated and validated configuration object</p> <p>Raises:</p> Type Description <code>FileNotFoundError</code> <p>If config.toml is not found</p> <code>TOMLDecodeError</code> <p>If config.toml is malformed</p> Example <p>config = load_application_config() print(config.user) 'myusername' print(config.nyaa_config.resolution) ['1080p', '720p']</p> Source code in <code>src/anifeed/constants/app_config.py</code> <pre><code>def load_application_config() -&gt; ApplicationConfig:\n    \"\"\"\n    Load application configuration from config.toml file.\n\n    Reads the TOML configuration file and constructs immutable configuration\n    objects. Uses MappingProxyType to prevent accidental mutation of loaded data.\n\n    Returns:\n        ApplicationConfig: Fully populated and validated configuration object\n\n    Raises:\n        FileNotFoundError: If config.toml is not found\n        tomllib.TOMLDecodeError: If config.toml is malformed\n\n    Example:\n        &gt;&gt;&gt; config = load_application_config()\n        &gt;&gt;&gt; print(config.user)\n        'myusername'\n        &gt;&gt;&gt; print(config.nyaa_config.resolution)\n        ['1080p', '720p']\n    \"\"\"\n    app_config = MappingProxyType(TomlParser.get_config(\"application\"))\n    nyaa_config = MappingProxyType(TomlParser.get_config(\"nyaa\"))\n\n    # Extract enabled statuses from config\n    status_dict = app_config.get(\"status\", {})\n    enabled_statuses = [k for k, v in status_dict.items() if v]\n\n    nyaa_config = NyaaConfig(\n        batch=nyaa_config.get(\"batch\"),\n        fansub=nyaa_config.get(\"fansub\"),\n        resolution=nyaa_config.get(\"resolution\")\n    )\n\n    return ApplicationConfig(\n        user=app_config.get(\"user\"),\n        api=app_config.get(\"api\"),\n        status=enabled_statuses,\n        nyaa_config=nyaa_config\n    )\n</code></pre>"},{"location":"reference/constants/nyaa_search_enum/","title":"Nyaa Search Enum","text":""},{"location":"reference/constants/nyaa_search_enum/#anifeed.constants.nyaa_search_enum","title":"<code>anifeed.constants.nyaa_search_enum</code>","text":"<p>Nyaa.si search parameter enumerations.</p> <p>This module defines all valid values for Nyaa.si search query parameters.</p>"},{"location":"reference/constants/nyaa_search_enum/#anifeed.constants.nyaa_search_enum.NyaaCategory","title":"<code>NyaaCategory</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Nyaa.si torrent categories for anime content.</p> <p>Values correspond to Nyaa's internal category codes.</p> Members <p>DEFAULT: All anime (category 1_0) ENGLISH_TRANSLATED: English subbed anime (1_2) NON_ENGLISH_TRANSLATED: Non-English subbed (1_3) RAW: Raw/untranslated (1_4)</p> Source code in <code>src/anifeed/constants/nyaa_search_enum.py</code> <pre><code>class NyaaCategory(Enum):\n    \"\"\"\n    Nyaa.si torrent categories for anime content.\n\n    Values correspond to Nyaa's internal category codes.\n\n    Members:\n        DEFAULT: All anime (category 1_0)\n        ENGLISH_TRANSLATED: English subbed anime (1_2)\n        NON_ENGLISH_TRANSLATED: Non-English subbed (1_3)\n        RAW: Raw/untranslated (1_4)\n    \"\"\"\n    DEFAULT = \"1_0\"\n    ENGLISH_TRANSLATED = \"1_2\"\n    NON_ENGLISH_TRANSLATED = \"1_3\"\n    RAW = \"1_4\"\n</code></pre>"},{"location":"reference/constants/nyaa_search_enum/#anifeed.constants.nyaa_search_enum.NyaaFilter","title":"<code>NyaaFilter</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Filter options for Nyaa.si search results.</p> Members <p>NO_FILTER: Show all results (value \"0\") NO_REMAKES: Exclude remakes/duplicates (value \"1\") TRUSTED_ONLY: Only trusted uploaders (value \"2\")</p> Source code in <code>src/anifeed/constants/nyaa_search_enum.py</code> <pre><code>class NyaaFilter(Enum):\n    \"\"\"\n    Filter options for Nyaa.si search results.\n\n    Members:\n        NO_FILTER: Show all results (value \"0\")\n        NO_REMAKES: Exclude remakes/duplicates (value \"1\")\n        TRUSTED_ONLY: Only trusted uploaders (value \"2\")\n    \"\"\"\n    NO_FILTER = \"0\"\n    NO_REMAKES = \"1\"\n    TRUSTED_ONLY = \"2\"\n</code></pre>"},{"location":"reference/constants/nyaa_search_enum/#anifeed.constants.nyaa_search_enum.NyaaColumnToOrder","title":"<code>NyaaColumnToOrder</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Columns available for sorting Nyaa.si search results.</p> Members <p>SEEDS: Sort by number of seeders SIZE: Sort by file size DOWNLOADS: Sort by total downloads LEECHERS: Sort by number of leechers</p> Source code in <code>src/anifeed/constants/nyaa_search_enum.py</code> <pre><code>class NyaaColumnToOrder(Enum):\n    \"\"\"\n    Columns available for sorting Nyaa.si search results.\n\n    Members:\n        SEEDS: Sort by number of seeders\n        SIZE: Sort by file size\n        DOWNLOADS: Sort by total downloads\n        LEECHERS: Sort by number of leechers\n    \"\"\"\n    SEEDS = \"seeders\"\n    SIZE = \"size\"\n    DOWNLOADS = \"download\"\n    LEECHERS = \"leechers\"\n</code></pre>"},{"location":"reference/constants/nyaa_search_enum/#anifeed.constants.nyaa_search_enum.NyaaOrder","title":"<code>NyaaOrder</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Sort order direction for Nyaa.si results.</p> Members <p>ASCENDING: Lowest to highest (value \"asc\") DESCENDING: Highest to lowest (value \"desc\")</p> Source code in <code>src/anifeed/constants/nyaa_search_enum.py</code> <pre><code>class NyaaOrder(Enum):\n    \"\"\"\n    Sort order direction for Nyaa.si results.\n\n    Members:\n        ASCENDING: Lowest to highest (value \"asc\")\n        DESCENDING: Highest to lowest (value \"desc\")\n    \"\"\"\n    ASCENDING = \"asc\"\n    DESCENDING = \"desc\"\n</code></pre>"},{"location":"reference/db/database/","title":"Database","text":""},{"location":"reference/db/database/#anifeed.db.database","title":"<code>anifeed.db.database</code>","text":"<p>SQLite connection factory and idempotent migration runner.</p> <p>This module centralizes database initialization, ensuring consistent connection configuration (row factory, foreign keys, WAL journaling) and tracking applied schema migrations to prevent re-execution on subsequent runs.</p>"},{"location":"reference/db/database/#anifeed.db.database.get_connection","title":"<code>get_connection(db_path)</code>","text":"<p>Create a configured SQLite connection (row factory, pragmas, WAL).</p> Source code in <code>src/anifeed/db/database.py</code> <pre><code>def get_connection(db_path: Path) -&gt; sqlite3.Connection:\n    \"\"\"Create a configured SQLite connection (row factory, pragmas, WAL).\"\"\"\n    connection = sqlite3.connect(db_path, detect_types=sqlite3.PARSE_DECLTYPES)\n    connection.row_factory = sqlite3.Row\n    connection.execute(\"PRAGMA foreign_keys = ON;\")\n    connection.execute(\"PRAGMA journal_mode = WAL;\")\n    connection.execute(\"PRAGMA busy_timeout = 5000;\")\n    return connection\n</code></pre>"},{"location":"reference/db/database/#anifeed.db.database.apply_migrations","title":"<code>apply_migrations(connection, applied)</code>","text":"<p>Run unapplied migration scripts in order and record them.</p> Source code in <code>src/anifeed/db/database.py</code> <pre><code>def apply_migrations(connection: sqlite3.Connection, applied: Iterable[str]) -&gt; None:\n    \"\"\"Run unapplied migration scripts in order and record them.\"\"\"\n    cursor = connection.cursor()\n    cursor.execute(\n        \"CREATE TABLE IF NOT EXISTS schema_migrations (filename TEXT PRIMARY KEY)\"\n    )\n\n    for name in sorted(resources.contents(MIGRATIONS_PACKAGE)):\n        if not name.endswith(\".sql\") or name in applied:\n            continue\n        script = resources.read_text(MIGRATIONS_PACKAGE, name)\n        cursor.executescript(script)\n        cursor.execute(\n            \"INSERT INTO schema_migrations (filename) VALUES (?)\",\n            (name,),\n        )\n\n    connection.commit()\n</code></pre>"},{"location":"reference/db/database/#anifeed.db.database.init_db","title":"<code>init_db(db_path)</code>","text":"<p>Idempotent database initialisation entry point.</p> Source code in <code>src/anifeed/db/database.py</code> <pre><code>def init_db(db_path: Path) -&gt; None:\n    \"\"\"Idempotent database initialisation entry point.\"\"\"\n    with get_connection(db_path) as conn:\n        cursor = conn.cursor()\n        cursor.execute(\n            \"CREATE TABLE IF NOT EXISTS schema_migrations (filename TEXT PRIMARY KEY)\"\n        )\n\n        already_applied = {\n            row[\"filename\"]\n            for row in cursor.execute(\"SELECT filename FROM schema_migrations\")\n        }\n        apply_migrations(conn, already_applied)\n</code></pre>"},{"location":"reference/db/mappers/","title":"Mappers","text":""},{"location":"reference/db/mappers/#anifeed.db.mappers","title":"<code>anifeed.db.mappers</code>","text":"<p>Bidirectional converters between SQLite rows and AniFeed domain models.</p> <p>Mappers translate sqlite3.Row objects into immutable Anime/Torrent dataclasses and convert domain objects into parameter tuples for prepared SQL statements. This separation keeps repositories thin and ensures domain models remain persistence-agnostic.</p>"},{"location":"reference/db/mappers/#anifeed.db.mappers.row_to_anime","title":"<code>row_to_anime(row)</code>","text":"<p>Create an Anime dataclass from a DB row.</p> Source code in <code>src/anifeed/db/mappers.py</code> <pre><code>def row_to_anime(row: Row) -&gt; Anime:\n    \"\"\"Create an Anime dataclass from a DB row.\"\"\"\n    return Anime(\n        anime_id=row[\"anime_id\"],\n        source=row[\"source\"],\n        title_romaji=row[\"title_romaji\"],\n        title_english=row[\"title_english\"],\n        status=row['status'],\n        episodes=row[\"episodes\"],\n    )\n</code></pre>"},{"location":"reference/db/mappers/#anifeed.db.mappers.anime_to_params","title":"<code>anime_to_params(anime)</code>","text":"<p>Convert an Anime instance into SQL parameter tuple.</p> Source code in <code>src/anifeed/db/mappers.py</code> <pre><code>def anime_to_params(anime: Anime) -&gt; tuple:\n    \"\"\"Convert an Anime instance into SQL parameter tuple.\"\"\"\n    return (\n        anime.anime_id,\n        anime.source,\n        anime.title_romaji,\n        anime.title_english,\n        anime.status,\n        anime.episodes,\n    )\n</code></pre>"},{"location":"reference/db/mappers/#anifeed.db.mappers.row_to_torrent","title":"<code>row_to_torrent(row)</code>","text":"<p>Create a Torrent dataclass from a DB row.</p> Source code in <code>src/anifeed/db/mappers.py</code> <pre><code>def row_to_torrent(row: Row) -&gt; Torrent:\n    \"\"\"Create a Torrent dataclass from a DB row.\"\"\"\n    return Torrent(\n        torrent_id=row[\"torrent_id\"],\n        title=row[\"title\"].strip(),\n        download_url=[\"download_url\"],\n        size=row[\"size\"],\n        seeders=row[\"seeders\"],\n        leechers=row[\"leechers\"],\n        anime_id=row[\"anime_id\"],\n        anime_source=row[\"anime_source\"],\n    )\n</code></pre>"},{"location":"reference/db/mappers/#anifeed.db.mappers.torrent_to_params","title":"<code>torrent_to_params(torrent)</code>","text":"<p>Convert a Torrent instance into SQL parameter tuple.</p> Source code in <code>src/anifeed/db/mappers.py</code> <pre><code>def torrent_to_params(torrent: Torrent) -&gt; tuple:\n    \"\"\"Convert a Torrent instance into SQL parameter tuple.\"\"\"\n    return (\n        torrent.torrent_id,\n        torrent.title,\n        torrent.download_url,\n        torrent.size,\n        torrent.seeders,\n        torrent.leechers\n    )\n</code></pre>"},{"location":"reference/db/repositories/interfaces/","title":"Interfaces","text":""},{"location":"reference/db/repositories/interfaces/#anifeed.db.repositories.interfaces","title":"<code>anifeed.db.repositories.interfaces</code>","text":"<p>Repository protocol definitions for anime and torrent persistence.</p> <p>Defines the abstract interfaces that concrete repository implementations must satisfy, enabling Dependency Inversion: services depend on these protocols rather than SQLite-specific classes, making the persistence layer swappable.</p>"},{"location":"reference/db/repositories/interfaces/#anifeed.db.repositories.interfaces.AnimeRepository","title":"<code>AnimeRepository</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Persistence port for cached anime lists.</p> Source code in <code>src/anifeed/db/repositories/interfaces.py</code> <pre><code>class AnimeRepository(Protocol):\n    \"\"\"Persistence port for cached anime lists.\"\"\"\n\n    def save_batch(self, animes: Sequence[Anime]) -&gt; None:\n        \"\"\"Persist a batch of Anime records (insert or update).\"\"\"\n        ...\n\n    def load(self) -&gt; list[Anime]:\n        \"\"\"Retrieve all cached Anime entries.\"\"\"\n        ...\n</code></pre>"},{"location":"reference/db/repositories/interfaces/#anifeed.db.repositories.interfaces.AnimeRepository.save_batch","title":"<code>save_batch(animes)</code>","text":"<p>Persist a batch of Anime records (insert or update).</p> Source code in <code>src/anifeed/db/repositories/interfaces.py</code> <pre><code>def save_batch(self, animes: Sequence[Anime]) -&gt; None:\n    \"\"\"Persist a batch of Anime records (insert or update).\"\"\"\n    ...\n</code></pre>"},{"location":"reference/db/repositories/interfaces/#anifeed.db.repositories.interfaces.AnimeRepository.load","title":"<code>load()</code>","text":"<p>Retrieve all cached Anime entries.</p> Source code in <code>src/anifeed/db/repositories/interfaces.py</code> <pre><code>def load(self) -&gt; list[Anime]:\n    \"\"\"Retrieve all cached Anime entries.\"\"\"\n    ...\n</code></pre>"},{"location":"reference/db/repositories/interfaces/#anifeed.db.repositories.interfaces.TorrentRepository","title":"<code>TorrentRepository</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Optional cache/history port for torrents.</p> Source code in <code>src/anifeed/db/repositories/interfaces.py</code> <pre><code>class TorrentRepository(Protocol):\n    \"\"\"Optional cache/history port for torrents.\"\"\"\n\n    def save_batch(self, torrents: Sequence[Torrent], anime_id: int, anime_source: str) -&gt; None:\n        \"\"\"Persist a batch of Torrent records (insert or update).\"\"\"\n        ...\n\n    def load(self) -&gt; Sequence[Torrent]:\n        \"\"\"Retrieve all cached Torrent entries.\"\"\"\n        ...\n</code></pre>"},{"location":"reference/db/repositories/interfaces/#anifeed.db.repositories.interfaces.TorrentRepository.save_batch","title":"<code>save_batch(torrents, anime_id, anime_source)</code>","text":"<p>Persist a batch of Torrent records (insert or update).</p> Source code in <code>src/anifeed/db/repositories/interfaces.py</code> <pre><code>def save_batch(self, torrents: Sequence[Torrent], anime_id: int, anime_source: str) -&gt; None:\n    \"\"\"Persist a batch of Torrent records (insert or update).\"\"\"\n    ...\n</code></pre>"},{"location":"reference/db/repositories/interfaces/#anifeed.db.repositories.interfaces.TorrentRepository.load","title":"<code>load()</code>","text":"<p>Retrieve all cached Torrent entries.</p> Source code in <code>src/anifeed/db/repositories/interfaces.py</code> <pre><code>def load(self) -&gt; Sequence[Torrent]:\n    \"\"\"Retrieve all cached Torrent entries.\"\"\"\n    ...\n</code></pre>"},{"location":"reference/db/repositories/sqlite_anime_repository/","title":"Sqlite Anime Repository","text":""},{"location":"reference/db/repositories/sqlite_anime_repository/#anifeed.db.repositories.sqlite_anime_repository","title":"<code>anifeed.db.repositories.sqlite_anime_repository</code>","text":"<p>SQLite-backed implementation of the AnimeRepository protocol.</p> <p>Provides persistent storage for Anime records using a shared SQLite connection. All SQL operations use parameterized queries to prevent injection, and domain conversion is delegated to mapper functions to keep this class focused purely on persistence mechanics.</p>"},{"location":"reference/db/repositories/sqlite_anime_repository/#anifeed.db.repositories.sqlite_anime_repository.SQLiteAnimeRepository","title":"<code>SQLiteAnimeRepository</code>","text":"<p>               Bases: <code>AnimeRepository</code></p> <p>Persist Anime records using a shared SQLite connection.</p> Source code in <code>src/anifeed/db/repositories/sqlite_anime_repository.py</code> <pre><code>class SQLiteAnimeRepository(AnimeRepository):\n    \"\"\"Persist Anime records using a shared SQLite connection.\"\"\"\n\n    def __init__(self, connection: sqlite3.Connection) -&gt; None:\n        \"\"\"\n        Initialize repository with a configured SQLite connection.\n\n        Args:\n            connection: SQLite connection with row_factory and pragmas configured\n        \"\"\"\n        self._connection = connection\n\n    def save_batch(self, animes: Sequence[Anime]) -&gt; None:\n        \"\"\"\n        Upsert a batch of Anime records.\n\n        Args:\n            animes: Sequence of Anime instances to persist\n\n        Raises:\n            AnifeedError: If database operation fails\n        \"\"\"\n        if not animes:\n            return\n        params = [anime_to_params(item) for item in animes]\n        try:\n            with self._connection:\n                self._connection.executemany(UPSERT_SQL, params)\n        except sqlite3.Error as exc:\n            raise AnifeedError(f\"Failed to save anime batch: {exc}\") from exc\n\n    def load(self) -&gt; list[Anime]:\n        \"\"\"\n        Retrieve all cached Anime entries.\n\n        Returns:\n            List of Anime instances sorted by romaji title\n\n        Raises:\n            AnifeedError: If database operation fails\n        \"\"\"\n        try:\n            cursor = self._connection.execute(SELECT_SQL)\n            return [row_to_anime(row) for row in cursor.fetchall()]\n        except sqlite3.Error as exc:\n            raise AnifeedError(f\"Failed to load anime records: {exc}\") from exc\n</code></pre>"},{"location":"reference/db/repositories/sqlite_anime_repository/#anifeed.db.repositories.sqlite_anime_repository.SQLiteAnimeRepository.__init__","title":"<code>__init__(connection)</code>","text":"<p>Initialize repository with a configured SQLite connection.</p> <p>Parameters:</p> Name Type Description Default <code>connection</code> <code>Connection</code> <p>SQLite connection with row_factory and pragmas configured</p> required Source code in <code>src/anifeed/db/repositories/sqlite_anime_repository.py</code> <pre><code>def __init__(self, connection: sqlite3.Connection) -&gt; None:\n    \"\"\"\n    Initialize repository with a configured SQLite connection.\n\n    Args:\n        connection: SQLite connection with row_factory and pragmas configured\n    \"\"\"\n    self._connection = connection\n</code></pre>"},{"location":"reference/db/repositories/sqlite_anime_repository/#anifeed.db.repositories.sqlite_anime_repository.SQLiteAnimeRepository.save_batch","title":"<code>save_batch(animes)</code>","text":"<p>Upsert a batch of Anime records.</p> <p>Parameters:</p> Name Type Description Default <code>animes</code> <code>Sequence[Anime]</code> <p>Sequence of Anime instances to persist</p> required <p>Raises:</p> Type Description <code>AnifeedError</code> <p>If database operation fails</p> Source code in <code>src/anifeed/db/repositories/sqlite_anime_repository.py</code> <pre><code>def save_batch(self, animes: Sequence[Anime]) -&gt; None:\n    \"\"\"\n    Upsert a batch of Anime records.\n\n    Args:\n        animes: Sequence of Anime instances to persist\n\n    Raises:\n        AnifeedError: If database operation fails\n    \"\"\"\n    if not animes:\n        return\n    params = [anime_to_params(item) for item in animes]\n    try:\n        with self._connection:\n            self._connection.executemany(UPSERT_SQL, params)\n    except sqlite3.Error as exc:\n        raise AnifeedError(f\"Failed to save anime batch: {exc}\") from exc\n</code></pre>"},{"location":"reference/db/repositories/sqlite_anime_repository/#anifeed.db.repositories.sqlite_anime_repository.SQLiteAnimeRepository.load","title":"<code>load()</code>","text":"<p>Retrieve all cached Anime entries.</p> <p>Returns:</p> Type Description <code>list[Anime]</code> <p>List of Anime instances sorted by romaji title</p> <p>Raises:</p> Type Description <code>AnifeedError</code> <p>If database operation fails</p> Source code in <code>src/anifeed/db/repositories/sqlite_anime_repository.py</code> <pre><code>def load(self) -&gt; list[Anime]:\n    \"\"\"\n    Retrieve all cached Anime entries.\n\n    Returns:\n        List of Anime instances sorted by romaji title\n\n    Raises:\n        AnifeedError: If database operation fails\n    \"\"\"\n    try:\n        cursor = self._connection.execute(SELECT_SQL)\n        return [row_to_anime(row) for row in cursor.fetchall()]\n    except sqlite3.Error as exc:\n        raise AnifeedError(f\"Failed to load anime records: {exc}\") from exc\n</code></pre>"},{"location":"reference/db/repositories/sqlite_torrent_repository/","title":"Sqlite Torrent Repository","text":""},{"location":"reference/db/repositories/sqlite_torrent_repository/#anifeed.db.repositories.sqlite_torrent_repository","title":"<code>anifeed.db.repositories.sqlite_torrent_repository</code>","text":"<p>SQLite-backed implementation of the TorrentRepository protocol.</p> <p>Manages persistent storage for Torrent metadata linked to Anime entries. Uses a foreign key relationship (anime_id) to maintain referential integrity and delegates row/domain conversion to mapper functions.</p>"},{"location":"reference/db/repositories/sqlite_torrent_repository/#anifeed.db.repositories.sqlite_torrent_repository.SQLiteTorrentRepository","title":"<code>SQLiteTorrentRepository</code>","text":"<p>               Bases: <code>TorrentRepository</code></p> <p>Persist Torrent records mapped to Anime entries via SQLite.</p> Source code in <code>src/anifeed/db/repositories/sqlite_torrent_repository.py</code> <pre><code>class SQLiteTorrentRepository(TorrentRepository):\n    \"\"\"Persist Torrent records mapped to Anime entries via SQLite.\"\"\"\n\n    def __init__(self, connection: sqlite3.Connection) -&gt; None:\n        \"\"\"\n        Initialize repository with a configured SQLite connection.\n\n        Args:\n            connection: SQLite connection with row_factory and pragmas configured\n        \"\"\"\n        self._connection = connection\n\n    def save_batch(self, torrents: Sequence[Torrent], anime_id: int, anime_source: str) -&gt; None:\n        \"\"\"\n        Upsert a batch of Torrent records.\n\n        Args:\n            torrents: Sequence of Torrent instances to persist\n\n        Raises:\n            AnifeedError: If database operation fails\n        \"\"\"\n        if not torrents:\n            return\n        params = [torrent_to_params(item)+(anime_id, anime_source) for item in torrents]\n        try:\n            with self._connection:\n                self._connection.executemany(INSERT_SQL, params)\n        except sqlite3.Error as exc:\n            raise AnifeedError(f\"Failed to save torrent batch: {exc}\") from exc\n\n    def load(self) -&gt; list[Torrent]:\n        \"\"\"\n        Retrieve all cached Torrent entries.\n\n        Returns:\n            List of Torrent instances sorted by seeder count (descending)\n\n        Raises:\n            AnifeedError: If database operation fails\n        \"\"\"\n        try:\n            cursor = self._connection.execute(SELECT_SQL)\n            return [row_to_torrent(row) for row in cursor.fetchall()]\n        except sqlite3.Error as exc:\n            raise AnifeedError(f\"Failed to load torrent records: {exc}\") from exc\n</code></pre>"},{"location":"reference/db/repositories/sqlite_torrent_repository/#anifeed.db.repositories.sqlite_torrent_repository.SQLiteTorrentRepository.__init__","title":"<code>__init__(connection)</code>","text":"<p>Initialize repository with a configured SQLite connection.</p> <p>Parameters:</p> Name Type Description Default <code>connection</code> <code>Connection</code> <p>SQLite connection with row_factory and pragmas configured</p> required Source code in <code>src/anifeed/db/repositories/sqlite_torrent_repository.py</code> <pre><code>def __init__(self, connection: sqlite3.Connection) -&gt; None:\n    \"\"\"\n    Initialize repository with a configured SQLite connection.\n\n    Args:\n        connection: SQLite connection with row_factory and pragmas configured\n    \"\"\"\n    self._connection = connection\n</code></pre>"},{"location":"reference/db/repositories/sqlite_torrent_repository/#anifeed.db.repositories.sqlite_torrent_repository.SQLiteTorrentRepository.save_batch","title":"<code>save_batch(torrents, anime_id, anime_source)</code>","text":"<p>Upsert a batch of Torrent records.</p> <p>Parameters:</p> Name Type Description Default <code>torrents</code> <code>Sequence[Torrent]</code> <p>Sequence of Torrent instances to persist</p> required <p>Raises:</p> Type Description <code>AnifeedError</code> <p>If database operation fails</p> Source code in <code>src/anifeed/db/repositories/sqlite_torrent_repository.py</code> <pre><code>def save_batch(self, torrents: Sequence[Torrent], anime_id: int, anime_source: str) -&gt; None:\n    \"\"\"\n    Upsert a batch of Torrent records.\n\n    Args:\n        torrents: Sequence of Torrent instances to persist\n\n    Raises:\n        AnifeedError: If database operation fails\n    \"\"\"\n    if not torrents:\n        return\n    params = [torrent_to_params(item)+(anime_id, anime_source) for item in torrents]\n    try:\n        with self._connection:\n            self._connection.executemany(INSERT_SQL, params)\n    except sqlite3.Error as exc:\n        raise AnifeedError(f\"Failed to save torrent batch: {exc}\") from exc\n</code></pre>"},{"location":"reference/db/repositories/sqlite_torrent_repository/#anifeed.db.repositories.sqlite_torrent_repository.SQLiteTorrentRepository.load","title":"<code>load()</code>","text":"<p>Retrieve all cached Torrent entries.</p> <p>Returns:</p> Type Description <code>list[Torrent]</code> <p>List of Torrent instances sorted by seeder count (descending)</p> <p>Raises:</p> Type Description <code>AnifeedError</code> <p>If database operation fails</p> Source code in <code>src/anifeed/db/repositories/sqlite_torrent_repository.py</code> <pre><code>def load(self) -&gt; list[Torrent]:\n    \"\"\"\n    Retrieve all cached Torrent entries.\n\n    Returns:\n        List of Torrent instances sorted by seeder count (descending)\n\n    Raises:\n        AnifeedError: If database operation fails\n    \"\"\"\n    try:\n        cursor = self._connection.execute(SELECT_SQL)\n        return [row_to_torrent(row) for row in cursor.fetchall()]\n    except sqlite3.Error as exc:\n        raise AnifeedError(f\"Failed to load torrent records: {exc}\") from exc\n</code></pre>"},{"location":"reference/models/anime_model/","title":"Anime Model","text":""},{"location":"reference/models/anime_model/#anifeed.models.anime_model","title":"<code>anifeed.models.anime_model</code>","text":"<p>Anime domain model.</p> <p>This module defines the core Anime data structure used throughout the application.</p>"},{"location":"reference/models/anime_model/#anifeed.models.anime_model.Anime","title":"<code>Anime</code>  <code>dataclass</code>","text":"<p>Represents anime metadata retrieved from anime listing services.</p> <p>This is an immutable value object that stores core anime information. Uses frozen dataclass to ensure thread-safety and hashability.</p> <p>Attributes:</p> Name Type Description <code>title_romaji</code> <code>str</code> <p>The romanized Japanese title (e.g., \"Shingeki no Kyojin\")</p> <code>title_english</code> <code>str</code> <p>The official English title (e.g., \"Attack on Titan\")</p> <code>status</code> <code>str</code> <p>Current airing status (e.g., \"RELEASING\", \"FINISHED\", \"NOT_YET_RELEASED\")</p> <code>episodes</code> <code>Optional[int]</code> <p>Total number of episodes. None if unknown or still airing</p> Example <p>anime = Anime( ...     title_romaji=\"Kimetsu no Yaiba\", ...     title_english=\"Demon Slayer\", ...     status=\"FINISHED\", ...     episodes=26 ... )</p> Source code in <code>src/anifeed/models/anime_model.py</code> <pre><code>@dataclass(frozen=True)\nclass Anime:\n    \"\"\"\n    Represents anime metadata retrieved from anime listing services.\n\n    This is an immutable value object that stores core anime information.\n    Uses frozen dataclass to ensure thread-safety and hashability.\n\n    Attributes:\n        title_romaji: The romanized Japanese title (e.g., \"Shingeki no Kyojin\")\n        title_english: The official English title (e.g., \"Attack on Titan\")\n        status: Current airing status (e.g., \"RELEASING\", \"FINISHED\", \"NOT_YET_RELEASED\")\n        episodes: Total number of episodes. None if unknown or still airing\n\n    Example:\n        &gt;&gt;&gt; anime = Anime(\n        ...     title_romaji=\"Kimetsu no Yaiba\",\n        ...     title_english=\"Demon Slayer\",\n        ...     status=\"FINISHED\",\n        ...     episodes=26\n        ... )\n    \"\"\"\n    anime_id: int\n    source: str\n    title_romaji: str\n    title_english: str\n    status: str\n    episodes: Optional[int] = None\n</code></pre>"},{"location":"reference/models/config_model/","title":"Config Model","text":""},{"location":"reference/models/config_model/#anifeed.models.config_model","title":"<code>anifeed.models.config_model</code>","text":"<p>Application configuration models.</p> <p>This module defines immutable configuration data structures loaded from config.toml.</p>"},{"location":"reference/models/config_model/#anifeed.models.config_model.NyaaConfig","title":"<code>NyaaConfig</code>  <code>dataclass</code>","text":"<p>Configuration for Nyaa torrent search filtering.</p> <p>Attributes:</p> Name Type Description <code>batch</code> <code>List[str]</code> <p>List of batch release markers (e.g., [\"[batch]\", \"(batch)\"])</p> <code>fansub</code> <code>List[str]</code> <p>Preferred fansub groups (e.g., [\"[SubsPlease]\", \"[Erai-raws]\"])</p> <code>resolution</code> <code>List[str]</code> <p>Preferred video resolutions (e.g., [\"1080p\", \"720p\"])</p> Example <p>nyaa = NyaaConfig( ...     batch=[\"[batch]\"], ...     fansub=[\"[SubsPlease]\"], ...     resolution=[\"1080p\"] ... )</p> Source code in <code>src/anifeed/models/config_model.py</code> <pre><code>@dataclass(frozen=True)\nclass NyaaConfig:\n    \"\"\"\n    Configuration for Nyaa torrent search filtering.\n\n    Attributes:\n        batch: List of batch release markers (e.g., [\"[batch]\", \"(batch)\"])\n        fansub: Preferred fansub groups (e.g., [\"[SubsPlease]\", \"[Erai-raws]\"])\n        resolution: Preferred video resolutions (e.g., [\"1080p\", \"720p\"])\n\n    Example:\n        &gt;&gt;&gt; nyaa = NyaaConfig(\n        ...     batch=[\"[batch]\"],\n        ...     fansub=[\"[SubsPlease]\"],\n        ...     resolution=[\"1080p\"]\n        ... )\n    \"\"\"\n    batch: List[str]\n    fansub: List[str]\n    resolution: List[str]\n</code></pre>"},{"location":"reference/models/config_model/#anifeed.models.config_model.ApplicationConfig","title":"<code>ApplicationConfig</code>  <code>dataclass</code>","text":"<p>Main application configuration loaded from config.toml.</p> <p>Attributes:</p> Name Type Description <code>user</code> <code>str</code> <p>Username for anime listing service (AniList or MAL)</p> <code>api</code> <code>str</code> <p>API source to use (\"anilist\" or \"mal\")</p> <code>status</code> <code>List[str]</code> <p>List of enabled anime statuses to track (e.g., [\"WATCHING\", \"COMPLETED\"])</p> <code>nyaa_config</code> <code>NyaaConfig</code> <p>Nested configuration for torrent search preferences</p> Example <p>config = ApplicationConfig( ...     user=\"myusername\", ...     api=\"anilist\", ...     status=[\"WATCHING\"], ...     nyaa_config=NyaaConfig(...) ... )</p> Source code in <code>src/anifeed/models/config_model.py</code> <pre><code>@dataclass(frozen=True)\nclass ApplicationConfig:\n    \"\"\"\n    Main application configuration loaded from config.toml.\n\n    Attributes:\n        user: Username for anime listing service (AniList or MAL)\n        api: API source to use (\"anilist\" or \"mal\")\n        status: List of enabled anime statuses to track (e.g., [\"WATCHING\", \"COMPLETED\"])\n        nyaa_config: Nested configuration for torrent search preferences\n\n    Example:\n        &gt;&gt;&gt; config = ApplicationConfig(\n        ...     user=\"myusername\",\n        ...     api=\"anilist\",\n        ...     status=[\"WATCHING\"],\n        ...     nyaa_config=NyaaConfig(...)\n        ... )\n    \"\"\"\n    user: str\n    api: str\n    status: List[str]\n    nyaa_config: NyaaConfig\n</code></pre>"},{"location":"reference/models/nyaa_search_model/","title":"Nyaa Search Model","text":""},{"location":"reference/models/nyaa_search_model/#anifeed.models.nyaa_search_model","title":"<code>anifeed.models.nyaa_search_model</code>","text":"<p>Nyaa search parameters model.</p> <p>This module defines the data structure for Nyaa.si search query parameters.</p>"},{"location":"reference/models/nyaa_search_model/#anifeed.models.nyaa_search_model.NyaaParameters","title":"<code>NyaaParameters</code>  <code>dataclass</code>","text":"<p>Encapsulates search parameters for Nyaa.si torrent queries.</p> <p>Mutable dataclass that holds all query parameters with sensible defaults for anime torrent searches.</p> <p>Attributes:</p> Name Type Description <code>q</code> <code>str</code> <p>Search query string (anime title)</p> <code>f</code> <code>NyaaFilter</code> <p>Filter type (no filter, no remakes, or trusted only)</p> <code>s</code> <code>NyaaColumnToOrder</code> <p>Column to sort results by (seeders, size, downloads, or leechers)</p> <code>o</code> <code>NyaaOrder</code> <p>Sort order (ascending or descending)</p> <code>c</code> <code>NyaaCategory</code> <p>Category to search within (defaults to anime English-translated)</p> Example <p>params = NyaaParameters( ...     q=\"Demon Slayer\", ...     f=NyaaFilter.TRUSTED_ONLY.value, ...     s=NyaaColumnToOrder.SEEDS.value ... )</p> Source code in <code>src/anifeed/models/nyaa_search_model.py</code> <pre><code>@dataclass\nclass NyaaParameters:\n    \"\"\"\n    Encapsulates search parameters for Nyaa.si torrent queries.\n\n    Mutable dataclass that holds all query parameters with sensible defaults\n    for anime torrent searches.\n\n    Attributes:\n        q: Search query string (anime title)\n        f: Filter type (no filter, no remakes, or trusted only)\n        s: Column to sort results by (seeders, size, downloads, or leechers)\n        o: Sort order (ascending or descending)\n        c: Category to search within (defaults to anime English-translated)\n\n    Example:\n        &gt;&gt;&gt; params = NyaaParameters(\n        ...     q=\"Demon Slayer\",\n        ...     f=NyaaFilter.TRUSTED_ONLY.value,\n        ...     s=NyaaColumnToOrder.SEEDS.value\n        ... )\n    \"\"\"\n    q: str\n    f: NyaaFilter = NyaaFilter.NO_FILTER.value\n    s: NyaaColumnToOrder = NyaaColumnToOrder.SEEDS.value\n    o: NyaaOrder = NyaaOrder.DESCENDING.value\n    c: NyaaCategory = NyaaCategory.DEFAULT.value\n</code></pre>"},{"location":"reference/models/torrent_model/","title":"Torrent Model","text":""},{"location":"reference/models/torrent_model/#anifeed.models.torrent_model","title":"<code>anifeed.models.torrent_model</code>","text":"<p>Torrent domain model.</p> <p>This module defines the torrent metadata structure retrieved from torrent sites.</p>"},{"location":"reference/models/torrent_model/#anifeed.models.torrent_model.Torrent","title":"<code>Torrent</code>  <code>dataclass</code>","text":"<p>Represents torrent metadata from anime torrent aggregators.</p> <p>This is an immutable value object for torrent search results. Frozen to ensure thread-safety and prevent accidental modification.</p> <p>Attributes:</p> Name Type Description <code>title</code> <code>str</code> <p>Full torrent title including release group and quality    (e.g., \"[SubsPlease] Anime Name - 01 [1080p].mkv\")</p> <code>download_url</code> <code>str</code> <p>Direct URL to the .torrent file</p> <code>size</code> <code>str</code> <p>Human-readable file size (e.g., \"1.3 GiB\", \"800 MiB\")</p> <code>seeders</code> <code>int</code> <p>Number of users currently sharing the complete file</p> <code>leechers</code> <code>int</code> <p>Number of users currently downloading</p> Example <p>torrent = Torrent( ...     title=\"[SubsPlease] Anime - 01 [1080p].mkv\", ...     download_url=\"https://nyaa.si/download/123.torrent\", ...     size=\"1.3 GiB\", ...     seeders=150, ...     leechers=25 ... )</p> Source code in <code>src/anifeed/models/torrent_model.py</code> <pre><code>@dataclass(frozen=True)\nclass Torrent:\n    \"\"\"\n    Represents torrent metadata from anime torrent aggregators.\n\n    This is an immutable value object for torrent search results.\n    Frozen to ensure thread-safety and prevent accidental modification.\n\n    Attributes:\n        title: Full torrent title including release group and quality\n               (e.g., \"[SubsPlease] Anime Name - 01 [1080p].mkv\")\n        download_url: Direct URL to the .torrent file\n        size: Human-readable file size (e.g., \"1.3 GiB\", \"800 MiB\")\n        seeders: Number of users currently sharing the complete file\n        leechers: Number of users currently downloading\n\n    Example:\n        &gt;&gt;&gt; torrent = Torrent(\n        ...     title=\"[SubsPlease] Anime - 01 [1080p].mkv\",\n        ...     download_url=\"https://nyaa.si/download/123.torrent\",\n        ...     size=\"1.3 GiB\",\n        ...     seeders=150,\n        ...     leechers=25\n        ... )\n    \"\"\"\n    torrent_id: str\n    title: str\n    download_url: str\n    size: str\n    seeders: int\n    leechers: int\n</code></pre>"},{"location":"reference/models/user_model/","title":"User Model","text":""},{"location":"reference/models/user_model/#anifeed.models.user_model","title":"<code>anifeed.models.user_model</code>","text":"<p>User anime list model.</p> <p>This module defines the structure for a user's complete anime collection.</p>"},{"location":"reference/models/user_model/#anifeed.models.user_model.UserAnimeList","title":"<code>UserAnimeList</code>  <code>dataclass</code>","text":"<p>Represents a user's complete anime list organized by status.</p> <p>Aggregates a user's anime collection from AniList or MyAnimeList, categorized by viewing status.</p> <p>Attributes:</p> Name Type Description <code>username</code> <code>str</code> <p>The user's username on the anime listing service</p> <code>source</code> <code>Literal['anilist', 'mal']</code> <p>Which service the data comes from (\"anilist\" or \"mal\")</p> <code>watching</code> <code>Optional[List[Anime]]</code> <p>Currently watching anime. None if not fetched</p> <code>completed</code> <code>Optional[List[Anime]]</code> <p>Completed anime. None if not fetched</p> <code>plan_to_watch</code> <code>Optional[List[Anime]]</code> <p>Planned anime. None if not fetched</p> Example <p>user_list = UserAnimeList( ...     username=\"johndoe\", ...     source=\"anilist\", ...     watching=[anime1, anime2], ...     completed=[anime3, anime4] ... )</p> Source code in <code>src/anifeed/models/user_model.py</code> <pre><code>@dataclass(frozen=True)\nclass UserAnimeList:\n    \"\"\"\n    Represents a user's complete anime list organized by status.\n\n    Aggregates a user's anime collection from AniList or MyAnimeList,\n    categorized by viewing status.\n\n    Attributes:\n        username: The user's username on the anime listing service\n        source: Which service the data comes from (\"anilist\" or \"mal\")\n        watching: Currently watching anime. None if not fetched\n        completed: Completed anime. None if not fetched\n        plan_to_watch: Planned anime. None if not fetched\n\n    Example:\n        &gt;&gt;&gt; user_list = UserAnimeList(\n        ...     username=\"johndoe\",\n        ...     source=\"anilist\",\n        ...     watching=[anime1, anime2],\n        ...     completed=[anime3, anime4]\n        ... )\n    \"\"\"\n    username: str\n    source: Literal[\"anilist\", \"mal\"]\n    watching: Optional[List[Anime]] = None\n    completed: Optional[List[Anime]] = None\n    plan_to_watch: Optional[List[Anime]] = None\n</code></pre>"},{"location":"reference/services/anime_service/","title":"Anime Service","text":""},{"location":"reference/services/anime_service/#anifeed.services.anime_service","title":"<code>anifeed.services.anime_service</code>","text":"<p>Anime listing service.</p> <p>This module provides a unified interface for fetching user anime lists from different anime tracking services (AniList, MyAnimeList).</p>"},{"location":"reference/services/anime_service/#anifeed.services.anime_service.AnimeService","title":"<code>AnimeService</code>","text":"<p>Service for fetching user anime lists from anime tracking platforms.</p> <p>Provides a consistent interface across different anime listing services (AniList, MyAnimeList) by delegating to source-specific API and parser implementations.</p> <p>Attributes:</p> Name Type Description <code>source</code> <p>The anime listing service being used (\"anilist\" or \"mal\")</p> <code>logger</code> <p>Logger for service operations</p> <code>_api</code> <p>Source-specific API client</p> <code>_parser</code> <p>Source-specific response parser</p> Example <p>service = AnimeService(source=\"anilist\") watching = service.get_user_anime_list(\"username\", AnimeStatus.WATCHING) for anime in watching: ...     print(anime.title_english)</p> Source code in <code>src/anifeed/services/anime_service.py</code> <pre><code>class AnimeService:\n    \"\"\"\n    Service for fetching user anime lists from anime tracking platforms.\n\n    Provides a consistent interface across different anime listing services\n    (AniList, MyAnimeList) by delegating to source-specific API and parser\n    implementations.\n\n    Attributes:\n        source: The anime listing service being used (\"anilist\" or \"mal\")\n        logger: Logger for service operations\n        _api: Source-specific API client\n        _parser: Source-specific response parser\n\n    Example:\n        &gt;&gt;&gt; service = AnimeService(source=\"anilist\")\n        &gt;&gt;&gt; watching = service.get_user_anime_list(\"username\", AnimeStatus.WATCHING)\n        &gt;&gt;&gt; for anime in watching:\n        ...     print(anime.title_english)\n    \"\"\"\n\n    def __init__(\n            self,\n            source: Literal[\"anilist\", \"mal\"] = \"anilist\",\n            session=None,\n            logger=None\n    ):\n        \"\"\"\n        Initialize anime service for a specific source.\n\n        Args:\n            source: Anime listing service to use (\"anilist\" or \"mal\")\n            session: Optional requests.Session for HTTP requests\n            logger: Optional logger instance\n\n        Raises:\n            AnimeSourceError: If source is not recognized\n        \"\"\"\n        self.source = source\n        self.logger = logger or get_logger(f\"anifeed.services.{self.__class__.__name__}\")\n        self._api, self._parser = create_anime_api_service(\n            source=source,\n            session=session,\n            logger=logger\n        )\n\n    def get_user_anime_list(self, username: str, status: AnimeStatus) -&gt; List[Anime]:\n        \"\"\"\n        Fetch a user's anime list filtered by viewing status.\n\n        Retrieves anime entries from the configured source (AniList or MAL)\n        for the specified user and status.\n\n        Args:\n            username: Username on the anime listing service\n            status: Filter by viewing status (WATCHING, COMPLETED, etc.)\n\n        Returns:\n            List of Anime objects matching the status filter\n\n        Raises:\n            ValueError: If username is empty or whitespace\n            NetworkError: If API request fails\n            ParsingError: If response cannot be parsed\n\n        Example:\n            &gt;&gt;&gt; service = AnimeService(source=\"anilist\")\n            &gt;&gt;&gt; watching = service.get_user_anime_list(\"john\", AnimeStatus.WATCHING)\n            &gt;&gt;&gt; completed = service.get_user_anime_list(\"john\", AnimeStatus.COMPLETED)\n        \"\"\"\n        if not username or not username.strip():\n            raise ValueError(\"Username cannot be empty\")\n\n        self.logger.debug(\"Fetching anime for %s from %s\", username, self.source)\n        raw_data = self._api.get_user_anime_list(username=username, status=status)\n        animes = self._parser.parse_api_metadata(metadata=raw_data)\n        self.logger.info(\"Fetched %d anime entries\", len(animes))\n        return animes\n</code></pre>"},{"location":"reference/services/anime_service/#anifeed.services.anime_service.AnimeService.__init__","title":"<code>__init__(source='anilist', session=None, logger=None)</code>","text":"<p>Initialize anime service for a specific source.</p> <p>Parameters:</p> Name Type Description Default <code>source</code> <code>Literal['anilist', 'mal']</code> <p>Anime listing service to use (\"anilist\" or \"mal\")</p> <code>'anilist'</code> <code>session</code> <p>Optional requests.Session for HTTP requests</p> <code>None</code> <code>logger</code> <p>Optional logger instance</p> <code>None</code> <p>Raises:</p> Type Description <code>AnimeSourceError</code> <p>If source is not recognized</p> Source code in <code>src/anifeed/services/anime_service.py</code> <pre><code>def __init__(\n        self,\n        source: Literal[\"anilist\", \"mal\"] = \"anilist\",\n        session=None,\n        logger=None\n):\n    \"\"\"\n    Initialize anime service for a specific source.\n\n    Args:\n        source: Anime listing service to use (\"anilist\" or \"mal\")\n        session: Optional requests.Session for HTTP requests\n        logger: Optional logger instance\n\n    Raises:\n        AnimeSourceError: If source is not recognized\n    \"\"\"\n    self.source = source\n    self.logger = logger or get_logger(f\"anifeed.services.{self.__class__.__name__}\")\n    self._api, self._parser = create_anime_api_service(\n        source=source,\n        session=session,\n        logger=logger\n    )\n</code></pre>"},{"location":"reference/services/anime_service/#anifeed.services.anime_service.AnimeService.get_user_anime_list","title":"<code>get_user_anime_list(username, status)</code>","text":"<p>Fetch a user's anime list filtered by viewing status.</p> <p>Retrieves anime entries from the configured source (AniList or MAL) for the specified user and status.</p> <p>Parameters:</p> Name Type Description Default <code>username</code> <code>str</code> <p>Username on the anime listing service</p> required <code>status</code> <code>AnimeStatus</code> <p>Filter by viewing status (WATCHING, COMPLETED, etc.)</p> required <p>Returns:</p> Type Description <code>List[Anime]</code> <p>List of Anime objects matching the status filter</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If username is empty or whitespace</p> <code>NetworkError</code> <p>If API request fails</p> <code>ParsingError</code> <p>If response cannot be parsed</p> Example <p>service = AnimeService(source=\"anilist\") watching = service.get_user_anime_list(\"john\", AnimeStatus.WATCHING) completed = service.get_user_anime_list(\"john\", AnimeStatus.COMPLETED)</p> Source code in <code>src/anifeed/services/anime_service.py</code> <pre><code>def get_user_anime_list(self, username: str, status: AnimeStatus) -&gt; List[Anime]:\n    \"\"\"\n    Fetch a user's anime list filtered by viewing status.\n\n    Retrieves anime entries from the configured source (AniList or MAL)\n    for the specified user and status.\n\n    Args:\n        username: Username on the anime listing service\n        status: Filter by viewing status (WATCHING, COMPLETED, etc.)\n\n    Returns:\n        List of Anime objects matching the status filter\n\n    Raises:\n        ValueError: If username is empty or whitespace\n        NetworkError: If API request fails\n        ParsingError: If response cannot be parsed\n\n    Example:\n        &gt;&gt;&gt; service = AnimeService(source=\"anilist\")\n        &gt;&gt;&gt; watching = service.get_user_anime_list(\"john\", AnimeStatus.WATCHING)\n        &gt;&gt;&gt; completed = service.get_user_anime_list(\"john\", AnimeStatus.COMPLETED)\n    \"\"\"\n    if not username or not username.strip():\n        raise ValueError(\"Username cannot be empty\")\n\n    self.logger.debug(\"Fetching anime for %s from %s\", username, self.source)\n    raw_data = self._api.get_user_anime_list(username=username, status=status)\n    animes = self._parser.parse_api_metadata(metadata=raw_data)\n    self.logger.info(\"Fetched %d anime entries\", len(animes))\n    return animes\n</code></pre>"},{"location":"reference/services/anime_service_factory/","title":"Anime Service Factory","text":""},{"location":"reference/services/anime_service_factory/#anifeed.services.anime_service_factory","title":"<code>anifeed.services.anime_service_factory</code>","text":"<p>Factory for creating anime API services.</p> <p>This module implements the Factory pattern with a registry for extensibility, allowing registration of new anime sources at runtime.</p>"},{"location":"reference/services/anime_service_factory/#anifeed.services.anime_service_factory.register_anime_source","title":"<code>register_anime_source(name, factory)</code>","text":"<p>Register a new anime source (extension point).</p> <p>Allows runtime registration of custom anime sources without modifying the factory code, following the Open/Closed Principle.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Unique identifier for the source (case-insensitive)</p> required <code>factory</code> <code>ApiParserFactory</code> <p>Callable that takes (session, logger) and returns     (BaseApi, BaseParser) tuple</p> required <p>Example:     &gt;&gt;&gt; def kitsu_factory(session, logger):     ...     return (KitsuApi(session, logger), KitsuParser(logger))     &gt;&gt;&gt; register_anime_source(\"kitsu\", kitsu_factory)     &gt;&gt;&gt; api, parser = create_anime_api_service(\"kitsu\")</p> Source code in <code>src/anifeed/services/anime_service_factory.py</code> <pre><code>def register_anime_source(name: str, factory: ApiParserFactory) -&gt; None:\n    \"\"\"\n    Register a new anime source (extension point).\n\n    Allows runtime registration of custom anime sources without modifying\n    the factory code, following the Open/Closed Principle.\n\n    Args:\n        name: Unique identifier for the source (case-insensitive)\n        factory: Callable that takes (session, logger) and returns\n                (BaseApi, BaseParser) tuple\n    Example:\n        &gt;&gt;&gt; def kitsu_factory(session, logger):\n        ...     return (KitsuApi(session, logger), KitsuParser(logger))\n        &gt;&gt;&gt; register_anime_source(\"kitsu\", kitsu_factory)\n        &gt;&gt;&gt; api, parser = create_anime_api_service(\"kitsu\")\n    \"\"\"\n    _ANIME_SOURCE_REGISTRY[name.lower()] = factory\n</code></pre>"},{"location":"reference/services/anime_service_factory/#anifeed.services.anime_service_factory.create_anime_api_service","title":"<code>create_anime_api_service(source, session=None, logger=None)</code>","text":"<p>Create API client and parser for the specified anime source.</p> <p>Factory function that instantiates the appropriate API and parser based on the source name. Supports case-insensitive source names.</p> <p>Parameters:</p> Name Type Description Default <code>source</code> <code>str</code> <p>Anime listing service name (\"anilist\", \"mal\", or custom)</p> required <code>session</code> <p>Optional requests.Session for HTTP client</p> <code>None</code> <code>logger</code> <p>Optional logger instance</p> <code>None</code> <p>Returns:</p> Type Description <code>Tuple[BaseApi, BaseParser]</code> <p>Tuple of (API client, response parser) for the source</p> <p>Raises:</p> Type Description <code>AnimeSourceError</code> <p>If source is not registered</p> Example <p>api, parser = create_anime_api_service(\"anilist\") raw_data = api.get_user_anime_list(\"user\", AnimeStatus.WATCHING) anime_list = parser.parse_api_metadata(raw_data)</p> Source code in <code>src/anifeed/services/anime_service_factory.py</code> <pre><code>def create_anime_api_service(source: str, session=None, logger=None) -&gt; Tuple[BaseApi, BaseParser]:\n    \"\"\"\n    Create API client and parser for the specified anime source.\n\n    Factory function that instantiates the appropriate API and parser\n    based on the source name. Supports case-insensitive source names.\n\n    Args:\n        source: Anime listing service name (\"anilist\", \"mal\", or custom)\n        session: Optional requests.Session for HTTP client\n        logger: Optional logger instance\n\n    Returns:\n        Tuple of (API client, response parser) for the source\n\n    Raises:\n        AnimeSourceError: If source is not registered\n\n    Example:\n        &gt;&gt;&gt; api, parser = create_anime_api_service(\"anilist\")\n        &gt;&gt;&gt; raw_data = api.get_user_anime_list(\"user\", AnimeStatus.WATCHING)\n        &gt;&gt;&gt; anime_list = parser.parse_api_metadata(raw_data)\n    \"\"\"\n    factory = _ANIME_SOURCE_REGISTRY.get(source.lower())\n    if factory is None:\n        available = \", \".join(_ANIME_SOURCE_REGISTRY.keys())\n        raise AnimeSourceError(\n            f\"Unknown anime source: '{source}'. Available: {available}\"\n        )\n    return factory(session, logger)\n</code></pre>"},{"location":"reference/services/similarity_service/","title":"Similarity Service","text":""},{"location":"reference/services/similarity_service/#anifeed.services.similarity_service","title":"<code>anifeed.services.similarity_service</code>","text":"<p>Semantic similarity service for text matching.</p> <p>This module provides cosine similarity computation between text strings using sentence embeddings, useful for matching anime titles with torrent results.</p>"},{"location":"reference/services/similarity_service/#anifeed.services.similarity_service.EmbeddingModelProtocol","title":"<code>EmbeddingModelProtocol</code>","text":"<p>               Bases: <code>Protocol</code></p> <p>Protocol for sentence embedding models.</p> <p>Defines the interface that embedding models must implement to be compatible with SimilarityService.</p> Source code in <code>src/anifeed/services/similarity_service.py</code> <pre><code>class EmbeddingModelProtocol(Protocol):\n    \"\"\"\n    Protocol for sentence embedding models.\n\n    Defines the interface that embedding models must implement to be\n    compatible with SimilarityService.\n    \"\"\"\n    def encode(self, texts: List[str], batch_size: int):\n        \"\"\"\n        Encode texts into embedding vectors.\n\n        Args:\n            texts: List of strings to encode\n            batch_size: Number of texts to process at once\n\n        Returns:\n            Array of embedding vectors\n        \"\"\"\n        ...\n</code></pre>"},{"location":"reference/services/similarity_service/#anifeed.services.similarity_service.EmbeddingModelProtocol.encode","title":"<code>encode(texts, batch_size)</code>","text":"<p>Encode texts into embedding vectors.</p> <p>Parameters:</p> Name Type Description Default <code>texts</code> <code>List[str]</code> <p>List of strings to encode</p> required <code>batch_size</code> <code>int</code> <p>Number of texts to process at once</p> required <p>Returns:</p> Type Description <p>Array of embedding vectors</p> Source code in <code>src/anifeed/services/similarity_service.py</code> <pre><code>def encode(self, texts: List[str], batch_size: int):\n    \"\"\"\n    Encode texts into embedding vectors.\n\n    Args:\n        texts: List of strings to encode\n        batch_size: Number of texts to process at once\n\n    Returns:\n        Array of embedding vectors\n    \"\"\"\n    ...\n</code></pre>"},{"location":"reference/services/similarity_service/#anifeed.services.similarity_service.SimilarityService","title":"<code>SimilarityService</code>","text":"<p>Semantic text similarity service using sentence embeddings.</p> <p>Computes cosine similarity between text strings using machine learning embeddings. Lazily loads the ML model only when first needed to avoid startup overhead.</p> <p>Attributes:</p> Name Type Description <code>_model_factory</code> <p>Factory function that creates the embedding model</p> <code>_model</code> <code>Optional[EmbeddingModelProtocol]</code> <p>Lazily loaded embedding model instance</p> <code>logger</code> <p>Logger for debugging model operations</p> Example <p>service = SimilarityService() results = service.compute( ...     \"Attack on Titan Season 2\", ...     [\"Attack on Titan S2\", \"Other Anime\", \"Attack on Titan\"] ... )</p> Source code in <code>src/anifeed/services/similarity_service.py</code> <pre><code>class SimilarityService:\n    \"\"\"\n    Semantic text similarity service using sentence embeddings.\n\n    Computes cosine similarity between text strings using machine learning\n    embeddings. Lazily loads the ML model only when first needed to avoid\n    startup overhead.\n\n    Attributes:\n        _model_factory: Factory function that creates the embedding model\n        _model: Lazily loaded embedding model instance\n        logger: Logger for debugging model operations\n\n    Example:\n        &gt;&gt;&gt; service = SimilarityService()\n        &gt;&gt;&gt; results = service.compute(\n        ...     \"Attack on Titan Season 2\",\n        ...     [\"Attack on Titan S2\", \"Other Anime\", \"Attack on Titan\"]\n        ... )\n        &gt;&gt;&gt; # Returns sorted by similarity: [(\"Attack on Titan S2\", 0.95), ...]\n    \"\"\"\n\n    def __init__(\n        self,\n        model_factory: Optional[Callable[[], EmbeddingModelProtocol]] = None,\n        logger=None\n    ):\n        \"\"\"\n        Initialize similarity service with optional custom model factory.\n\n        Args:\n            model_factory: Optional factory function returning an embedding model.\n                          Defaults to SentenceTransformer(\"all-MiniLM-L6-v2\")\n            logger: Optional logger instance for debugging\n        \"\"\"\n        self._model_factory = model_factory or self._default_model_factory\n        self._model: Optional[EmbeddingModelProtocol] = None\n        self.logger = logger or get_logger(\"anifeed.services.SimilarityService\")\n\n    @staticmethod\n    def _default_model_factory() -&gt; EmbeddingModelProtocol:\n        \"\"\"\n        Create default sentence transformer model.\n\n        Uses the lightweight all-MiniLM-L6-v2 model which provides a good\n        balance of speed and accuracy for short text similarity.\n\n        Returns:\n            SentenceTransformer model instance\n        \"\"\"\n        from sentence_transformers import SentenceTransformer\n        return SentenceTransformer(\"all-MiniLM-L6-v2\")\n\n    def load_model(self) -&gt; None:\n        \"\"\"\n        Lazily load the embedding model.\n\n        Only loads the model once, on first use. Subsequent calls are no-ops.\n        This defers expensive model loading until similarity computation is needed.\n\n        Note:\n            First call may take several seconds to download and load the model.\n        \"\"\"\n        if self._model is None:\n            self.logger.debug(\"Loading embedding model\")\n            self._model = self._model_factory()\n            self.logger.info(\"Model loaded successfully\")\n\n    def compute(self, to_compare: str, candidates: List[str]) -&gt; List[tuple[str, float]]:\n        \"\"\"\n        Compute similarity between a query and candidate strings.\n\n        Uses cosine similarity on sentence embeddings to rank candidates by\n        semantic similarity to the query string.\n\n        Args:\n            to_compare: The query string to compare against\n            candidates: List of candidate strings to rank\n\n        Returns:\n            List of (candidate, similarity_score) tuples sorted by descending\n            similarity. Scores range from -1 to 1, where 1 is identical meaning.\n\n        Example:\n            &gt;&gt;&gt; service = SimilarityService()\n            &gt;&gt;&gt; results = service.compute(\n            ...     \"Demon Slayer Season 2\",\n            ...     [\"Demon Slayer S2\", \"Demon Slayer\", \"Other Anime\", \"Unrelated\"]\n            ... )\n            &gt;&gt;&gt; print(results[0])\n            ('Demon Slayer S2', 0.92)\n        \"\"\"\n        if not candidates:\n            return []\n\n        self.load_model()\n        all_strings = [to_compare] + candidates\n        embeddings = self._model.encode(all_strings)\n        query_vector = embeddings[0]\n        candidate_vectors = embeddings[1:]\n\n        results = [\n            (candidate, self._cosine_similarity(query_vector, vec))\n            for candidate, vec in zip(candidates, candidate_vectors)\n        ]\n\n        results.sort(key=lambda x: x[1], reverse=True)\n        return results\n\n    @staticmethod\n    def _cosine_similarity(a, b) -&gt; float:\n        \"\"\"\n        Calculate cosine similarity between two vectors.\n\n        Cosine similarity measures the cosine of the angle between two vectors,\n        providing a metric of how similar their directions are regardless of magnitude.\n\n        Args:\n            a: First vector (numpy array)\n            b: Second vector (numpy array)\n\n        Returns:\n            Similarity score from -1 (opposite) to 1 (identical direction)\n\n        Example:\n            &gt;&gt;&gt; import numpy as np\n            &gt;&gt;&gt; a = np.array([1, 0, 0])\n            &gt;&gt;&gt; b = np.array([1, 0, 0])\n            &gt;&gt;&gt; SimilarityService._cosine_similarity(a, b)\n            1.0\n        \"\"\"\n        return float(dot(a, b) / (norm(a) * norm(b)))\n</code></pre>"},{"location":"reference/services/similarity_service/#anifeed.services.similarity_service.SimilarityService--returns-sorted-by-similarity-attack-on-titan-s2-095","title":"Returns sorted by similarity: [(\"Attack on Titan S2\", 0.95), ...]","text":""},{"location":"reference/services/similarity_service/#anifeed.services.similarity_service.SimilarityService.__init__","title":"<code>__init__(model_factory=None, logger=None)</code>","text":"<p>Initialize similarity service with optional custom model factory.</p> <p>Parameters:</p> Name Type Description Default <code>model_factory</code> <code>Optional[Callable[[], EmbeddingModelProtocol]]</code> <p>Optional factory function returning an embedding model.           Defaults to SentenceTransformer(\"all-MiniLM-L6-v2\")</p> <code>None</code> <code>logger</code> <p>Optional logger instance for debugging</p> <code>None</code> Source code in <code>src/anifeed/services/similarity_service.py</code> <pre><code>def __init__(\n    self,\n    model_factory: Optional[Callable[[], EmbeddingModelProtocol]] = None,\n    logger=None\n):\n    \"\"\"\n    Initialize similarity service with optional custom model factory.\n\n    Args:\n        model_factory: Optional factory function returning an embedding model.\n                      Defaults to SentenceTransformer(\"all-MiniLM-L6-v2\")\n        logger: Optional logger instance for debugging\n    \"\"\"\n    self._model_factory = model_factory or self._default_model_factory\n    self._model: Optional[EmbeddingModelProtocol] = None\n    self.logger = logger or get_logger(\"anifeed.services.SimilarityService\")\n</code></pre>"},{"location":"reference/services/similarity_service/#anifeed.services.similarity_service.SimilarityService.load_model","title":"<code>load_model()</code>","text":"<p>Lazily load the embedding model.</p> <p>Only loads the model once, on first use. Subsequent calls are no-ops. This defers expensive model loading until similarity computation is needed.</p> Note <p>First call may take several seconds to download and load the model.</p> Source code in <code>src/anifeed/services/similarity_service.py</code> <pre><code>def load_model(self) -&gt; None:\n    \"\"\"\n    Lazily load the embedding model.\n\n    Only loads the model once, on first use. Subsequent calls are no-ops.\n    This defers expensive model loading until similarity computation is needed.\n\n    Note:\n        First call may take several seconds to download and load the model.\n    \"\"\"\n    if self._model is None:\n        self.logger.debug(\"Loading embedding model\")\n        self._model = self._model_factory()\n        self.logger.info(\"Model loaded successfully\")\n</code></pre>"},{"location":"reference/services/similarity_service/#anifeed.services.similarity_service.SimilarityService.compute","title":"<code>compute(to_compare, candidates)</code>","text":"<p>Compute similarity between a query and candidate strings.</p> <p>Uses cosine similarity on sentence embeddings to rank candidates by semantic similarity to the query string.</p> <p>Parameters:</p> Name Type Description Default <code>to_compare</code> <code>str</code> <p>The query string to compare against</p> required <code>candidates</code> <code>List[str]</code> <p>List of candidate strings to rank</p> required <p>Returns:</p> Type Description <code>List[tuple[str, float]]</code> <p>List of (candidate, similarity_score) tuples sorted by descending</p> <code>List[tuple[str, float]]</code> <p>similarity. Scores range from -1 to 1, where 1 is identical meaning.</p> Example <p>service = SimilarityService() results = service.compute( ...     \"Demon Slayer Season 2\", ...     [\"Demon Slayer S2\", \"Demon Slayer\", \"Other Anime\", \"Unrelated\"] ... ) print(results[0]) ('Demon Slayer S2', 0.92)</p> Source code in <code>src/anifeed/services/similarity_service.py</code> <pre><code>def compute(self, to_compare: str, candidates: List[str]) -&gt; List[tuple[str, float]]:\n    \"\"\"\n    Compute similarity between a query and candidate strings.\n\n    Uses cosine similarity on sentence embeddings to rank candidates by\n    semantic similarity to the query string.\n\n    Args:\n        to_compare: The query string to compare against\n        candidates: List of candidate strings to rank\n\n    Returns:\n        List of (candidate, similarity_score) tuples sorted by descending\n        similarity. Scores range from -1 to 1, where 1 is identical meaning.\n\n    Example:\n        &gt;&gt;&gt; service = SimilarityService()\n        &gt;&gt;&gt; results = service.compute(\n        ...     \"Demon Slayer Season 2\",\n        ...     [\"Demon Slayer S2\", \"Demon Slayer\", \"Other Anime\", \"Unrelated\"]\n        ... )\n        &gt;&gt;&gt; print(results[0])\n        ('Demon Slayer S2', 0.92)\n    \"\"\"\n    if not candidates:\n        return []\n\n    self.load_model()\n    all_strings = [to_compare] + candidates\n    embeddings = self._model.encode(all_strings)\n    query_vector = embeddings[0]\n    candidate_vectors = embeddings[1:]\n\n    results = [\n        (candidate, self._cosine_similarity(query_vector, vec))\n        for candidate, vec in zip(candidates, candidate_vectors)\n    ]\n\n    results.sort(key=lambda x: x[1], reverse=True)\n    return results\n</code></pre>"},{"location":"reference/services/torrent_service/","title":"Torrent Service","text":""},{"location":"reference/services/torrent_service/#anifeed.services.torrent_service","title":"<code>anifeed.services.torrent_service</code>","text":"<p>Torrent search service.</p> <p>This module provides anime torrent search functionality using Nyaa.si.</p>"},{"location":"reference/services/torrent_service/#anifeed.services.torrent_service.TorrentService","title":"<code>TorrentService</code>","text":"<p>Service for searching anime torrents on Nyaa.si.</p> <p>Provides a high-level interface for searching torrents with automatic HTML parsing and result extraction.</p> <p>Attributes:</p> Name Type Description <code>_api</code> <p>Nyaa API client for HTTP requests</p> <code>_parser</code> <p>HTML parser for extracting torrent metadata</p> <code>logger</code> <p>Logger for service operations</p> Example <p>service = TorrentService() torrents = service.search(\"Attack on Titan\") best = torrents[0]  # Sorted by seeders by default print(f\"{best.title} - {best.seeders} seeders\")</p> Source code in <code>src/anifeed/services/torrent_service.py</code> <pre><code>class TorrentService:\n    \"\"\"\n    Service for searching anime torrents on Nyaa.si.\n\n    Provides a high-level interface for searching torrents with automatic\n    HTML parsing and result extraction.\n\n    Attributes:\n        _api: Nyaa API client for HTTP requests\n        _parser: HTML parser for extracting torrent metadata\n        logger: Logger for service operations\n\n    Example:\n        &gt;&gt;&gt; service = TorrentService()\n        &gt;&gt;&gt; torrents = service.search(\"Attack on Titan\")\n        &gt;&gt;&gt; best = torrents[0]  # Sorted by seeders by default\n        &gt;&gt;&gt; print(f\"{best.title} - {best.seeders} seeders\")\n    \"\"\"\n\n    def __init__(self, session=None, logger=None):\n        \"\"\"\n        Initialize torrent service with Nyaa API and parser.\n\n        Args:\n            session: Optional requests.Session for HTTP requests\n            logger: Optional logger instance\n        \"\"\"\n        self._api = NyaaApi(session=session, logger=logger)\n        self._parser = NyaaParser(logger=logger)\n        self.logger = logger or get_logger(f\"anifeed.services.{self.__class__.__name__}\")\n\n    def search(self, query: str, **kwargs) -&gt; List[Torrent]:\n        \"\"\"\n        Search for anime torrents on Nyaa.si.\n\n        Searches Nyaa with the provided query string and optional filters.\n        Results are sorted by seeders in descending order by default.\n\n        Args:\n            query: Search query (anime title)\n            **kwargs: Optional NyaaParameters fields (f, s, o, c)\n                     See NyaaParameters for available options\n             Returns:\n            List of Torrent objects sorted by seeders (descending)\n\n        Raises:\n            ValueError: If query is empty or whitespace\n            NetworkError: If Nyaa request fails\n            ParsingError: If HTML response cannot be parsed\n\n        Example:\n            &gt;&gt;&gt; service = TorrentService()\n            &gt;&gt;&gt; # Basic search\n            &gt;&gt;&gt; torrents = service.search(\"Demon Slayer\")\n\n            &gt;&gt;&gt; # With filters\n            &gt;&gt;&gt; from anifeed.constants import NyaaFilter\n            &gt;&gt;&gt; torrents = service.search(\n            ...     \"Demon Slayer\",\n            ...     f=NyaaFilter.TRUSTED_ONLY.value\n            ... )\n        \"\"\"\n        if not query or not query.strip():\n            raise ValueError(\"Search query cannot be empty\")\n\n        params = NyaaParameters(q=query.strip(), **kwargs)\n        self.logger.debug(\"Searching torrents: %s\", query)\n        raw_html = self._api.fetch_search_result(params=params)\n        torrents = self._parser.parse_api_metadata(metadata=raw_html)\n        self.logger.info(\"Found %d torrents for %s\", len(torrents), query)\n        return torrents\n</code></pre>"},{"location":"reference/services/torrent_service/#anifeed.services.torrent_service.TorrentService.__init__","title":"<code>__init__(session=None, logger=None)</code>","text":"<p>Initialize torrent service with Nyaa API and parser.</p> <p>Parameters:</p> Name Type Description Default <code>session</code> <p>Optional requests.Session for HTTP requests</p> <code>None</code> <code>logger</code> <p>Optional logger instance</p> <code>None</code> Source code in <code>src/anifeed/services/torrent_service.py</code> <pre><code>def __init__(self, session=None, logger=None):\n    \"\"\"\n    Initialize torrent service with Nyaa API and parser.\n\n    Args:\n        session: Optional requests.Session for HTTP requests\n        logger: Optional logger instance\n    \"\"\"\n    self._api = NyaaApi(session=session, logger=logger)\n    self._parser = NyaaParser(logger=logger)\n    self.logger = logger or get_logger(f\"anifeed.services.{self.__class__.__name__}\")\n</code></pre>"},{"location":"reference/services/torrent_service/#anifeed.services.torrent_service.TorrentService.search","title":"<code>search(query, **kwargs)</code>","text":"<p>Search for anime torrents on Nyaa.si.</p> <p>Searches Nyaa with the provided query string and optional filters. Results are sorted by seeders in descending order by default.</p> <p>Parameters:</p> Name Type Description Default <code>query</code> <code>str</code> <p>Search query (anime title)</p> required <code>**kwargs</code> <p>Optional NyaaParameters fields (f, s, o, c)      See NyaaParameters for available options Returns:</p> <code>{}</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>If query is empty or whitespace</p> <code>NetworkError</code> <p>If Nyaa request fails</p> <code>ParsingError</code> <p>If HTML response cannot be parsed</p> Example <p>service = TorrentService()</p> Source code in <code>src/anifeed/services/torrent_service.py</code> <pre><code>def search(self, query: str, **kwargs) -&gt; List[Torrent]:\n    \"\"\"\n    Search for anime torrents on Nyaa.si.\n\n    Searches Nyaa with the provided query string and optional filters.\n    Results are sorted by seeders in descending order by default.\n\n    Args:\n        query: Search query (anime title)\n        **kwargs: Optional NyaaParameters fields (f, s, o, c)\n                 See NyaaParameters for available options\n         Returns:\n        List of Torrent objects sorted by seeders (descending)\n\n    Raises:\n        ValueError: If query is empty or whitespace\n        NetworkError: If Nyaa request fails\n        ParsingError: If HTML response cannot be parsed\n\n    Example:\n        &gt;&gt;&gt; service = TorrentService()\n        &gt;&gt;&gt; # Basic search\n        &gt;&gt;&gt; torrents = service.search(\"Demon Slayer\")\n\n        &gt;&gt;&gt; # With filters\n        &gt;&gt;&gt; from anifeed.constants import NyaaFilter\n        &gt;&gt;&gt; torrents = service.search(\n        ...     \"Demon Slayer\",\n        ...     f=NyaaFilter.TRUSTED_ONLY.value\n        ... )\n    \"\"\"\n    if not query or not query.strip():\n        raise ValueError(\"Search query cannot be empty\")\n\n    params = NyaaParameters(q=query.strip(), **kwargs)\n    self.logger.debug(\"Searching torrents: %s\", query)\n    raw_html = self._api.fetch_search_result(params=params)\n    torrents = self._parser.parse_api_metadata(metadata=raw_html)\n    self.logger.info(\"Found %d torrents for %s\", len(torrents), query)\n    return torrents\n</code></pre>"},{"location":"reference/services/torrent_service/#anifeed.services.torrent_service.TorrentService.search--basic-search","title":"Basic search","text":"<p>torrents = service.search(\"Demon Slayer\")</p>"},{"location":"reference/services/torrent_service/#anifeed.services.torrent_service.TorrentService.search--with-filters","title":"With filters","text":"<p>from anifeed.constants import NyaaFilter torrents = service.search( ...     \"Demon Slayer\", ...     f=NyaaFilter.TRUSTED_ONLY.value ... )</p>"},{"location":"reference/services/apis/anilist_api/","title":"Anilist Api","text":""},{"location":"reference/services/apis/anilist_api/#anifeed.services.apis.anilist_api","title":"<code>anifeed.services.apis.anilist_api</code>","text":"<p>AniList GraphQL API client.</p> <p>This module provides an interface to the AniList GraphQL API for fetching user anime lists.</p>"},{"location":"reference/services/apis/anilist_api/#anifeed.services.apis.anilist_api.AniListApi","title":"<code>AniListApi</code>","text":"<p>               Bases: <code>BaseApi</code></p> <p>AniList GraphQL API client for anime data.</p> <p>Provides methods for querying user anime lists from AniList using their GraphQL API. Automatically translates internal status enums to AniList status strings.</p> <p>Attributes:</p> Name Type Description <code>_query_fetch_userlist</code> <p>GraphQL query for fetching user lists</p> Example <p>api = AniListApi() data = api.get_user_anime_list(\"username\", AnimeStatus.WATCHING) print(data[\"data\"][\"MediaListCollection\"])</p> Source code in <code>src/anifeed/services/apis/anilist_api.py</code> <pre><code>class AniListApi(BaseApi):\n    \"\"\"\n    AniList GraphQL API client for anime data.\n\n    Provides methods for querying user anime lists from AniList using their\n    GraphQL API. Automatically translates internal status enums to AniList\n    status strings.\n\n    Attributes:\n        _query_fetch_userlist: GraphQL query for fetching user lists\n\n    Example:\n        &gt;&gt;&gt; api = AniListApi()\n        &gt;&gt;&gt; data = api.get_user_anime_list(\"username\", AnimeStatus.WATCHING)\n        &gt;&gt;&gt; print(data[\"data\"][\"MediaListCollection\"])\n    \"\"\"\n\n    def __init__(self,\n                 session=None,\n                 query_path: Optional[str] = None,\n                 logger=None\n                 ):\n        \"\"\"\n        Initialize AniList API client.\n\n        Args:\n            session: Optional requests.Session for HTTP requests\n            query_path: Optional custom path to GraphQL query file\n            logger: Optional logger instance\n        \"\"\"\n        super().__init__(\n            base_url=\"https://graphql.anilist.co\",\n            session=session,\n            logger=logger)\n\n        qpath = UniversalPath(\"services/apis/anilist_api/fetch_userlist.graphql\")\n        with open(qpath, mode=\"r\", encoding=\"utf-8\") as fh:\n            self._query_fetch_userlist = fh.read()\n\n    def get_user_anime_list(\n            self,\n            username: str,\n            status: EnumType,\n            ) -&gt; Dict:\n        \"\"\"\n        Fetch user's anime list from AniList filtered by status.\n\n        Executes a GraphQL query to retrieve anime entries for the specified\n        user and viewing status.\n\n        Args:\n            username: AniList username\n            status: Internal AnimeStatus enum value\n\n        Returns:\n            Raw GraphQL response as dictionary\n\n        Raises:\n            requests.HTTPError: If API request fails\n\n        Example:\n            &gt;&gt;&gt; api = AniListApi()\n            &gt;&gt;&gt; response = api.get_user_anime_list(\"user123\", AnimeStatus.WATCHING)\n            &gt;&gt;&gt; entries = response[\"data\"][\"MediaListCollection\"][\"lists\"][0][\"entries\"]\n        \"\"\"\n        status = self._translate_status(internal_status=status)\n        payload_dict = {\n            \"query\": self._query_fetch_userlist,\n            \"variables\": {\"userName\": username,\n                          \"status\": status}\n            }\n        r = self.post(json=payload_dict)\n        r.raise_for_status()\n        return r.json()\n\n    def _translate_status(self, internal_status: AnimeStatus) -&gt; Optional[str]:\n        \"\"\"\n        Translate internal AnimeStatus to AniList status string.\n\n        Args:\n            internal_status: Internal AnimeStatus enum\n\n        Returns:\n            AniList API status string (e.g., \"CURRENT\", \"COMPLETED\")\n\n        Example:\n            &gt;&gt;&gt; api = AniListApi()\n            &gt;&gt;&gt; api._translate_status(AnimeStatus.WATCHING)\n            'CURRENT'\n        \"\"\"\n        return ANILIST_STATUS_MAP.get(internal_status)\n</code></pre>"},{"location":"reference/services/apis/anilist_api/#anifeed.services.apis.anilist_api.AniListApi.__init__","title":"<code>__init__(session=None, query_path=None, logger=None)</code>","text":"<p>Initialize AniList API client.</p> <p>Parameters:</p> Name Type Description Default <code>session</code> <p>Optional requests.Session for HTTP requests</p> <code>None</code> <code>query_path</code> <code>Optional[str]</code> <p>Optional custom path to GraphQL query file</p> <code>None</code> <code>logger</code> <p>Optional logger instance</p> <code>None</code> Source code in <code>src/anifeed/services/apis/anilist_api.py</code> <pre><code>def __init__(self,\n             session=None,\n             query_path: Optional[str] = None,\n             logger=None\n             ):\n    \"\"\"\n    Initialize AniList API client.\n\n    Args:\n        session: Optional requests.Session for HTTP requests\n        query_path: Optional custom path to GraphQL query file\n        logger: Optional logger instance\n    \"\"\"\n    super().__init__(\n        base_url=\"https://graphql.anilist.co\",\n        session=session,\n        logger=logger)\n\n    qpath = UniversalPath(\"services/apis/anilist_api/fetch_userlist.graphql\")\n    with open(qpath, mode=\"r\", encoding=\"utf-8\") as fh:\n        self._query_fetch_userlist = fh.read()\n</code></pre>"},{"location":"reference/services/apis/anilist_api/#anifeed.services.apis.anilist_api.AniListApi.get_user_anime_list","title":"<code>get_user_anime_list(username, status)</code>","text":"<p>Fetch user's anime list from AniList filtered by status.</p> <p>Executes a GraphQL query to retrieve anime entries for the specified user and viewing status.</p> <p>Parameters:</p> Name Type Description Default <code>username</code> <code>str</code> <p>AniList username</p> required <code>status</code> <code>EnumType</code> <p>Internal AnimeStatus enum value</p> required <p>Returns:</p> Type Description <code>Dict</code> <p>Raw GraphQL response as dictionary</p> <p>Raises:</p> Type Description <code>HTTPError</code> <p>If API request fails</p> Example <p>api = AniListApi() response = api.get_user_anime_list(\"user123\", AnimeStatus.WATCHING) entries = response[\"data\"][\"MediaListCollection\"][\"lists\"][0][\"entries\"]</p> Source code in <code>src/anifeed/services/apis/anilist_api.py</code> <pre><code>def get_user_anime_list(\n        self,\n        username: str,\n        status: EnumType,\n        ) -&gt; Dict:\n    \"\"\"\n    Fetch user's anime list from AniList filtered by status.\n\n    Executes a GraphQL query to retrieve anime entries for the specified\n    user and viewing status.\n\n    Args:\n        username: AniList username\n        status: Internal AnimeStatus enum value\n\n    Returns:\n        Raw GraphQL response as dictionary\n\n    Raises:\n        requests.HTTPError: If API request fails\n\n    Example:\n        &gt;&gt;&gt; api = AniListApi()\n        &gt;&gt;&gt; response = api.get_user_anime_list(\"user123\", AnimeStatus.WATCHING)\n        &gt;&gt;&gt; entries = response[\"data\"][\"MediaListCollection\"][\"lists\"][0][\"entries\"]\n    \"\"\"\n    status = self._translate_status(internal_status=status)\n    payload_dict = {\n        \"query\": self._query_fetch_userlist,\n        \"variables\": {\"userName\": username,\n                      \"status\": status}\n        }\n    r = self.post(json=payload_dict)\n    r.raise_for_status()\n    return r.json()\n</code></pre>"},{"location":"reference/services/apis/base_api/","title":"Base Api","text":""},{"location":"reference/services/apis/base_api/#anifeed.services.apis.base_api","title":"<code>anifeed.services.apis.base_api</code>","text":"<p>Base API client with HTTP functionality.</p> <p>This module provides the base class for all API clients, extending HttpClient with API-specific logging.</p>"},{"location":"reference/services/apis/base_api/#anifeed.services.apis.base_api.BaseApi","title":"<code>BaseApi</code>","text":"<p>               Bases: <code>HttpClient</code></p> <p>Base class for API clients with HTTP capabilities.</p> <p>Extends HttpClient with API-specific logging namespace. All concrete API implementations should inherit from this class.</p> <p>Attributes:</p> Name Type Description <code>base_url</code> <p>Base URL for the API</p> <code>session</code> <p>Configured requests Session</p> <code>logger</code> <p>Namespaced logger for API operations</p> Example <p>class MyApi(BaseApi): ...     def init(self): ...         super().init(base_url=\"https://api.example.com\") ...     def fetch_data(self): ...         return self.get(\"/data\").json()</p> Source code in <code>src/anifeed/services/apis/base_api.py</code> <pre><code>class BaseApi(HttpClient):\n    \"\"\"\n    Base class for API clients with HTTP capabilities.\n\n    Extends HttpClient with API-specific logging namespace. All concrete\n    API implementations should inherit from this class.\n\n    Attributes:\n        base_url: Base URL for the API\n        session: Configured requests Session\n        logger: Namespaced logger for API operations\n\n    Example:\n        &gt;&gt;&gt; class MyApi(BaseApi):\n        ...     def __init__(self):\n        ...         super().__init__(base_url=\"https://api.example.com\")\n        ...     def fetch_data(self):\n        ...         return self.get(\"/data\").json()\n    \"\"\"\n\n    def __init__(self,\n                 base_url: Optional[str] = None,\n                 session: Optional[requests.Session] = None,\n                 logger=None\n                 ):\n        \"\"\"\n        Initialize base API client.\n\n        Args:\n            base_url: Optional base URL for all API requests\n            session: Optional custom requests.Session\n            logger: Optional logger (defaults to namespaced logger)\n        \"\"\"\n        super().__init__(base_url=base_url, session=session)\n        self.logger = logger or get_logger(f\"anifeed.services.apis.{self.__class__.__name__}\")\n</code></pre>"},{"location":"reference/services/apis/base_api/#anifeed.services.apis.base_api.BaseApi.__init__","title":"<code>__init__(base_url=None, session=None, logger=None)</code>","text":"<p>Initialize base API client.</p> <p>Parameters:</p> Name Type Description Default <code>base_url</code> <code>Optional[str]</code> <p>Optional base URL for all API requests</p> <code>None</code> <code>session</code> <code>Optional[Session]</code> <p>Optional custom requests.Session</p> <code>None</code> <code>logger</code> <p>Optional logger (defaults to namespaced logger)</p> <code>None</code> Source code in <code>src/anifeed/services/apis/base_api.py</code> <pre><code>def __init__(self,\n             base_url: Optional[str] = None,\n             session: Optional[requests.Session] = None,\n             logger=None\n             ):\n    \"\"\"\n    Initialize base API client.\n\n    Args:\n        base_url: Optional base URL for all API requests\n        session: Optional custom requests.Session\n        logger: Optional logger (defaults to namespaced logger)\n    \"\"\"\n    super().__init__(base_url=base_url, session=session)\n    self.logger = logger or get_logger(f\"anifeed.services.apis.{self.__class__.__name__}\")\n</code></pre>"},{"location":"reference/services/apis/mal_api/","title":"Mal Api","text":""},{"location":"reference/services/apis/mal_api/#anifeed.services.apis.mal_api","title":"<code>anifeed.services.apis.mal_api</code>","text":"<p>MyAnimeList REST API client.</p> <p>This module provides an interface to the MyAnimeList v2 REST API for fetching user anime lists.</p>"},{"location":"reference/services/apis/mal_api/#anifeed.services.apis.mal_api.MalApi","title":"<code>MalApi</code>","text":"<p>               Bases: <code>BaseApi</code></p> <p>MyAnimeList REST API client for anime data.</p> <p>Provides methods for querying user anime lists from MyAnimeList using their v2 REST API. Requires MAL_CLIENT_ID environment variable for authentication.</p> <p>Attributes:</p> Name Type Description <code>session</code> <p>Configured with MAL authentication headers</p> Example <p>os.environ[\"MAL_CLIENT_ID\"] = \"your_client_id\" api = MalApi() data = api.get_user_anime_list(\"username\", AnimeStatus.WATCHING) print(data[\"data\"])</p> Source code in <code>src/anifeed/services/apis/mal_api.py</code> <pre><code>class MalApi(BaseApi):\n    \"\"\"\n    MyAnimeList REST API client for anime data.\n\n    Provides methods for querying user anime lists from MyAnimeList using their\n    v2 REST API. Requires MAL_CLIENT_ID environment variable for authentication.\n\n    Attributes:\n        session: Configured with MAL authentication headers\n\n    Example:\n        &gt;&gt;&gt; os.environ[\"MAL_CLIENT_ID\"] = \"your_client_id\"\n        &gt;&gt;&gt; api = MalApi()\n        &gt;&gt;&gt; data = api.get_user_anime_list(\"username\", AnimeStatus.WATCHING)\n        &gt;&gt;&gt; print(data[\"data\"])\n    \"\"\"\n\n    def __init__(self,\n                 session=None,\n                 logger=None,\n                 ):\n        \"\"\"\n        Initialize MAL API client with authentication.\n\n        Args:\n            session: Optional requests.Session for HTTP requests\n            logger: Optional logger instance\n\n        Note:\n            Requires MAL_CLIENT_ID environment variable to be set.\n        \"\"\"\n        super().__init__(\n            base_url=\"https://api.myanimelist.net/v2\",\n            session=session, logger=logger\n            )\n        self.session.headers = {\"X-MAL-CLIENT-ID\": os.getenv(\"MAL_CLIENT_ID\")}\n\n    def get_user_anime_list(\n            self,\n            username: str,\n            status: EnumType,\n            ) -&gt; Dict:\n        \"\"\"\n        Fetch user's anime list from MAL filtered by status.\n\n        Makes a REST API call to retrieve anime entries for the specified\n        user and viewing status.\n\n        Args:\n            username: MyAnimeList username\n            status: Internal AnimeStatus enum value\n\n        Returns:\n            Raw API response as dictionary\n\n        Raises:\n            requests.HTTPError: If API request fails\n\n        Example:\n            &gt;&gt;&gt; api = MalApi()\n            &gt;&gt;&gt; response = api.get_user_anime_list(\"user123\", AnimeStatus.WATCHING)\n            &gt;&gt;&gt; for item in response[\"data\"]:\n            ...     print(item[\"node\"][\"title\"])\n        \"\"\"\n        status = self._translate_status(internal_status=status)\n        payload_dict = {\n            \"status\": status,\n            \"fields\": \"id,title,alternative_titles,status,num_episodes\",\n            \"limit\": 1000,\n            \"nsfw\": \"true\",\n            \"offset\": 0\n            }\n        response = dict(data=list())\n        has_paging = True\n        while has_paging:\n            r = self.get(f\"/users/{username}/animelist\", params=payload_dict)\n            r.raise_for_status()\n            aux = r.json()\n            response[\"data\"].extend(aux[\"data\"])\n            if aux.get(\"paging\").get(\"next\"):\n                payload_dict[\"offset\"] += payload_dict[\"limit\"]\n            else:\n                has_paging = False\n        return response\n\n    def _translate_status(self, internal_status: AnimeStatus) -&gt; Optional[str]:\n        \"\"\"\n        Translate internal AnimeStatus to MAL status string.\n\n        Args:\n            internal_status: Internal AnimeStatus enum\n\n        Returns:\n            MAL API status string (e.g., \"watching\", \"completed\")\n\n        Example:\n            &gt;&gt;&gt; api = MalApi()\n            &gt;&gt;&gt; api._translate_status(AnimeStatus.WATCHING)\n            'watching'\n        \"\"\"\n        return MAL_STATUS_MAP.get(internal_status)\n</code></pre>"},{"location":"reference/services/apis/mal_api/#anifeed.services.apis.mal_api.MalApi.__init__","title":"<code>__init__(session=None, logger=None)</code>","text":"<p>Initialize MAL API client with authentication.</p> <p>Parameters:</p> Name Type Description Default <code>session</code> <p>Optional requests.Session for HTTP requests</p> <code>None</code> <code>logger</code> <p>Optional logger instance</p> <code>None</code> Note <p>Requires MAL_CLIENT_ID environment variable to be set.</p> Source code in <code>src/anifeed/services/apis/mal_api.py</code> <pre><code>def __init__(self,\n             session=None,\n             logger=None,\n             ):\n    \"\"\"\n    Initialize MAL API client with authentication.\n\n    Args:\n        session: Optional requests.Session for HTTP requests\n        logger: Optional logger instance\n\n    Note:\n        Requires MAL_CLIENT_ID environment variable to be set.\n    \"\"\"\n    super().__init__(\n        base_url=\"https://api.myanimelist.net/v2\",\n        session=session, logger=logger\n        )\n    self.session.headers = {\"X-MAL-CLIENT-ID\": os.getenv(\"MAL_CLIENT_ID\")}\n</code></pre>"},{"location":"reference/services/apis/mal_api/#anifeed.services.apis.mal_api.MalApi.get_user_anime_list","title":"<code>get_user_anime_list(username, status)</code>","text":"<p>Fetch user's anime list from MAL filtered by status.</p> <p>Makes a REST API call to retrieve anime entries for the specified user and viewing status.</p> <p>Parameters:</p> Name Type Description Default <code>username</code> <code>str</code> <p>MyAnimeList username</p> required <code>status</code> <code>EnumType</code> <p>Internal AnimeStatus enum value</p> required <p>Returns:</p> Type Description <code>Dict</code> <p>Raw API response as dictionary</p> <p>Raises:</p> Type Description <code>HTTPError</code> <p>If API request fails</p> Example <p>api = MalApi() response = api.get_user_anime_list(\"user123\", AnimeStatus.WATCHING) for item in response[\"data\"]: ...     print(item[\"node\"][\"title\"])</p> Source code in <code>src/anifeed/services/apis/mal_api.py</code> <pre><code>def get_user_anime_list(\n        self,\n        username: str,\n        status: EnumType,\n        ) -&gt; Dict:\n    \"\"\"\n    Fetch user's anime list from MAL filtered by status.\n\n    Makes a REST API call to retrieve anime entries for the specified\n    user and viewing status.\n\n    Args:\n        username: MyAnimeList username\n        status: Internal AnimeStatus enum value\n\n    Returns:\n        Raw API response as dictionary\n\n    Raises:\n        requests.HTTPError: If API request fails\n\n    Example:\n        &gt;&gt;&gt; api = MalApi()\n        &gt;&gt;&gt; response = api.get_user_anime_list(\"user123\", AnimeStatus.WATCHING)\n        &gt;&gt;&gt; for item in response[\"data\"]:\n        ...     print(item[\"node\"][\"title\"])\n    \"\"\"\n    status = self._translate_status(internal_status=status)\n    payload_dict = {\n        \"status\": status,\n        \"fields\": \"id,title,alternative_titles,status,num_episodes\",\n        \"limit\": 1000,\n        \"nsfw\": \"true\",\n        \"offset\": 0\n        }\n    response = dict(data=list())\n    has_paging = True\n    while has_paging:\n        r = self.get(f\"/users/{username}/animelist\", params=payload_dict)\n        r.raise_for_status()\n        aux = r.json()\n        response[\"data\"].extend(aux[\"data\"])\n        if aux.get(\"paging\").get(\"next\"):\n            payload_dict[\"offset\"] += payload_dict[\"limit\"]\n        else:\n            has_paging = False\n    return response\n</code></pre>"},{"location":"reference/services/apis/nyaa_api/","title":"Nyaa Api","text":""},{"location":"reference/services/apis/nyaa_api/#anifeed.services.apis.nyaa_api","title":"<code>anifeed.services.apis.nyaa_api</code>","text":"<p>Nyaa.si torrent site API client.</p> <p>This module provides an interface for searching torrents on Nyaa.si.</p>"},{"location":"reference/services/apis/nyaa_api/#anifeed.services.apis.nyaa_api.NyaaApi","title":"<code>NyaaApi</code>","text":"<p>               Bases: <code>BaseApi</code></p> <p>Nyaa.si torrent search API client.</p> <p>Provides methods for querying the Nyaa.si torrent aggregator with customizable search parameters.</p> Example <p>api = NyaaApi() params = NyaaParameters(q=\"Attack on Titan\") html = api.fetch_search_result(params)</p> Source code in <code>src/anifeed/services/apis/nyaa_api.py</code> <pre><code>class NyaaApi(BaseApi):\n    \"\"\"\n    Nyaa.si torrent search API client.\n\n    Provides methods for querying the Nyaa.si torrent aggregator with\n    customizable search parameters.\n\n    Example:\n        &gt;&gt;&gt; api = NyaaApi()\n        &gt;&gt;&gt; params = NyaaParameters(q=\"Attack on Titan\")\n        &gt;&gt;&gt; html = api.fetch_search_result(params)\n        &gt;&gt;&gt; # Returns raw HTML for parsing\n    \"\"\"\n\n    def __init__(\n                self,\n                session=None,\n                logger=None):\n        \"\"\"\n        Initialize Nyaa API client.\n\n        Args:\n            session: Optional requests.Session for HTTP requests\n            logger: Optional logger instance\n        \"\"\"\n        super().__init__(\n            base_url=\"https://nyaa.si\",\n            session=session,\n            logger=logger)\n\n    def fetch_search_result(\n            self,\n            params: NyaaParameters,\n            ) -&gt; str:\n        \"\"\"\n        Search Nyaa.si with the specified parameters.\n\n        Executes a GET request to Nyaa.si with the search parameters\n        and returns the raw HTML response for parsing.\n\n        Args:\n            params: NyaaParameters object with search configuration\n\n        Returns:\n            Raw HTML response as string\n\n        Raises:\n            requests.HTTPError: If request fails\n\n        Example:\n            &gt;&gt;&gt; api = NyaaApi()\n            &gt;&gt;&gt; from anifeed.constants.nyaa_search_enum import NyaaFilter\n            &gt;&gt;&gt; params = NyaaParameters(\n            ...     q=\"Demon Slayer\",\n            ...     f=NyaaFilter.TRUSTED_ONLY.value\n            ... )\n            &gt;&gt;&gt; html = api.fetch_search_result(params)\n        \"\"\"\n        r = self.get(params=asdict(params))\n        r.raise_for_status()\n        return r.text\n</code></pre>"},{"location":"reference/services/apis/nyaa_api/#anifeed.services.apis.nyaa_api.NyaaApi--returns-raw-html-for-parsing","title":"Returns raw HTML for parsing","text":""},{"location":"reference/services/apis/nyaa_api/#anifeed.services.apis.nyaa_api.NyaaApi.__init__","title":"<code>__init__(session=None, logger=None)</code>","text":"<p>Initialize Nyaa API client.</p> <p>Parameters:</p> Name Type Description Default <code>session</code> <p>Optional requests.Session for HTTP requests</p> <code>None</code> <code>logger</code> <p>Optional logger instance</p> <code>None</code> Source code in <code>src/anifeed/services/apis/nyaa_api.py</code> <pre><code>def __init__(\n            self,\n            session=None,\n            logger=None):\n    \"\"\"\n    Initialize Nyaa API client.\n\n    Args:\n        session: Optional requests.Session for HTTP requests\n        logger: Optional logger instance\n    \"\"\"\n    super().__init__(\n        base_url=\"https://nyaa.si\",\n        session=session,\n        logger=logger)\n</code></pre>"},{"location":"reference/services/apis/nyaa_api/#anifeed.services.apis.nyaa_api.NyaaApi.fetch_search_result","title":"<code>fetch_search_result(params)</code>","text":"<p>Search Nyaa.si with the specified parameters.</p> <p>Executes a GET request to Nyaa.si with the search parameters and returns the raw HTML response for parsing.</p> <p>Parameters:</p> Name Type Description Default <code>params</code> <code>NyaaParameters</code> <p>NyaaParameters object with search configuration</p> required <p>Returns:</p> Type Description <code>str</code> <p>Raw HTML response as string</p> <p>Raises:</p> Type Description <code>HTTPError</code> <p>If request fails</p> Example <p>api = NyaaApi() from anifeed.constants.nyaa_search_enum import NyaaFilter params = NyaaParameters( ...     q=\"Demon Slayer\", ...     f=NyaaFilter.TRUSTED_ONLY.value ... ) html = api.fetch_search_result(params)</p> Source code in <code>src/anifeed/services/apis/nyaa_api.py</code> <pre><code>def fetch_search_result(\n        self,\n        params: NyaaParameters,\n        ) -&gt; str:\n    \"\"\"\n    Search Nyaa.si with the specified parameters.\n\n    Executes a GET request to Nyaa.si with the search parameters\n    and returns the raw HTML response for parsing.\n\n    Args:\n        params: NyaaParameters object with search configuration\n\n    Returns:\n        Raw HTML response as string\n\n    Raises:\n        requests.HTTPError: If request fails\n\n    Example:\n        &gt;&gt;&gt; api = NyaaApi()\n        &gt;&gt;&gt; from anifeed.constants.nyaa_search_enum import NyaaFilter\n        &gt;&gt;&gt; params = NyaaParameters(\n        ...     q=\"Demon Slayer\",\n        ...     f=NyaaFilter.TRUSTED_ONLY.value\n        ... )\n        &gt;&gt;&gt; html = api.fetch_search_result(params)\n    \"\"\"\n    r = self.get(params=asdict(params))\n    r.raise_for_status()\n    return r.text\n</code></pre>"},{"location":"reference/services/parsers/anilist_parser/","title":"Anilist Parser","text":""},{"location":"reference/services/parsers/anilist_parser/#anifeed.services.parsers.anilist_parser","title":"<code>anifeed.services.parsers.anilist_parser</code>","text":"<p>AniList GraphQL response parser.</p> <p>This module parses AniList GraphQL responses into Anime domain objects.</p>"},{"location":"reference/services/parsers/anilist_parser/#anifeed.services.parsers.anilist_parser.AniListParser","title":"<code>AniListParser</code>","text":"<p>               Bases: <code>BaseParser</code></p> <p>Parser for AniList GraphQL API responses.</p> <p>Extracts anime metadata from AniList's nested GraphQL response structure and converts it into Anime domain objects.</p> Example <p>parser = AniListParser() response = {\"data\": {\"MediaListCollection\": {\"lists\": [...]}}} anime_list = parser.parse_api_metadata(response)</p> Source code in <code>src/anifeed/services/parsers/anilist_parser.py</code> <pre><code>class AniListParser(BaseParser):\n    \"\"\"\n    Parser for AniList GraphQL API responses.\n\n    Extracts anime metadata from AniList's nested GraphQL response structure\n    and converts it into Anime domain objects.\n\n    Example:\n        &gt;&gt;&gt; parser = AniListParser()\n        &gt;&gt;&gt; response = {\"data\": {\"MediaListCollection\": {\"lists\": [...]}}}\n        &gt;&gt;&gt; anime_list = parser.parse_api_metadata(response)\n    \"\"\"\n\n    def parse_api_metadata(self, metadata: Dict[Any, Any]) -&gt; List[Anime]:\n        \"\"\"\n        Parse AniList GraphQL response into Anime objects.\n\n        Recursively extracts anime entries from the nested GraphQL structure\n        and maps them to domain Anime objects.\n\n        Args:\n            metadata: Raw GraphQL response dictionary\n\n        Returns:\n            List of Anime objects extracted from the response\n\n        Example:\n            &gt;&gt;&gt; parser = AniListParser()\n            &gt;&gt;&gt; data = {\n            ...     \"data\": {\n            ...         \"MediaListCollection\": {\n            ...             \"lists\": [{\n            ...                 \"entries\": [{\n            ...                     \"media\": {\n            ...                         \"title\": {\"romaji\": \"...\", \"english\": \"...\"},\n            ...                         \"episodes\": 12,\n            ...                         \"status\": \"FINISHED\"\n            ...                     }\n            ...                 }]\n            ...             }]\n            ...         }\n            ...     }\n            ... }\n            &gt;&gt;&gt; anime_list = parser.parse_api_metadata(data)\n        \"\"\"\n        metadata = DictWrangler.find_value_recursively(\n            data=metadata, target_key=\"entries\")\n        res = [\n            Anime(\n                anime_id=DictWrangler.find_value_recursively(x, \"id\"),\n                source=AniListParser.__class__.__name__,\n                title_romaji=DictWrangler.find_value_recursively(x, \"romaji\"),\n                title_english=DictWrangler.find_value_recursively(x, \"english\"),\n                episodes=DictWrangler.find_value_recursively(x, \"episodes\"),\n                status=DictWrangler.find_value_recursively(x, \"status\"),\n                )\n            for x in metadata]\n\n        return res\n</code></pre>"},{"location":"reference/services/parsers/anilist_parser/#anifeed.services.parsers.anilist_parser.AniListParser.parse_api_metadata","title":"<code>parse_api_metadata(metadata)</code>","text":"<p>Parse AniList GraphQL response into Anime objects.</p> <p>Recursively extracts anime entries from the nested GraphQL structure and maps them to domain Anime objects.</p> <p>Parameters:</p> Name Type Description Default <code>metadata</code> <code>Dict[Any, Any]</code> <p>Raw GraphQL response dictionary</p> required <p>Returns:</p> Type Description <code>List[Anime]</code> <p>List of Anime objects extracted from the response</p> Example <p>parser = AniListParser() data = { ...     \"data\": { ...         \"MediaListCollection\": { ...             \"lists\": [{ ...                 \"entries\": [{ ...                     \"media\": { ...                         \"title\": {\"romaji\": \"...\", \"english\": \"...\"}, ...                         \"episodes\": 12, ...                         \"status\": \"FINISHED\" ...                     } ...                 }] ...             }] ...         } ...     } ... } anime_list = parser.parse_api_metadata(data)</p> Source code in <code>src/anifeed/services/parsers/anilist_parser.py</code> <pre><code>def parse_api_metadata(self, metadata: Dict[Any, Any]) -&gt; List[Anime]:\n    \"\"\"\n    Parse AniList GraphQL response into Anime objects.\n\n    Recursively extracts anime entries from the nested GraphQL structure\n    and maps them to domain Anime objects.\n\n    Args:\n        metadata: Raw GraphQL response dictionary\n\n    Returns:\n        List of Anime objects extracted from the response\n\n    Example:\n        &gt;&gt;&gt; parser = AniListParser()\n        &gt;&gt;&gt; data = {\n        ...     \"data\": {\n        ...         \"MediaListCollection\": {\n        ...             \"lists\": [{\n        ...                 \"entries\": [{\n        ...                     \"media\": {\n        ...                         \"title\": {\"romaji\": \"...\", \"english\": \"...\"},\n        ...                         \"episodes\": 12,\n        ...                         \"status\": \"FINISHED\"\n        ...                     }\n        ...                 }]\n        ...             }]\n        ...         }\n        ...     }\n        ... }\n        &gt;&gt;&gt; anime_list = parser.parse_api_metadata(data)\n    \"\"\"\n    metadata = DictWrangler.find_value_recursively(\n        data=metadata, target_key=\"entries\")\n    res = [\n        Anime(\n            anime_id=DictWrangler.find_value_recursively(x, \"id\"),\n            source=AniListParser.__class__.__name__,\n            title_romaji=DictWrangler.find_value_recursively(x, \"romaji\"),\n            title_english=DictWrangler.find_value_recursively(x, \"english\"),\n            episodes=DictWrangler.find_value_recursively(x, \"episodes\"),\n            status=DictWrangler.find_value_recursively(x, \"status\"),\n            )\n        for x in metadata]\n\n    return res\n</code></pre>"},{"location":"reference/services/parsers/base_parser/","title":"Base Parser","text":""},{"location":"reference/services/parsers/base_parser/#anifeed.services.parsers.base_parser","title":"<code>anifeed.services.parsers.base_parser</code>","text":"<p>Base parser for API responses.</p> <p>This module provides the abstract base class for all API response parsers.</p>"},{"location":"reference/services/parsers/base_parser/#anifeed.services.parsers.base_parser.BaseParser","title":"<code>BaseParser</code>","text":"<p>Abstract base class for API response parsers.</p> <p>Defines the interface that all concrete parsers must implement. Provides common logger initialization for all parsers.</p> <p>Attributes:</p> Name Type Description <code>logger</code> <p>Namespaced logger for parser operations</p> Example <p>class MyParser(BaseParser): ...     def parse_api_metadata(self, metadata): ...         # Extract data from response ...         return parsed_data</p> Source code in <code>src/anifeed/services/parsers/base_parser.py</code> <pre><code>class BaseParser:\n    \"\"\"\n    Abstract base class for API response parsers.\n\n    Defines the interface that all concrete parsers must implement.\n    Provides common logger initialization for all parsers.\n\n    Attributes:\n        logger: Namespaced logger for parser operations\n\n    Example:\n        &gt;&gt;&gt; class MyParser(BaseParser):\n        ...     def parse_api_metadata(self, metadata):\n        ...         # Extract data from response\n        ...         return parsed_data\n    \"\"\"\n\n    def __init__(self, logger=None):\n        \"\"\"\n        Initialize base parser with logger.\n\n        Args:\n            logger: Optional logger (defaults to namespaced logger)\n        \"\"\"\n        self.logger = logger or get_logger(f\"anifeed.services.{self.__class__.__name__}\")\n\n    def parse_api_metadata(self, metadata: Any):\n        \"\"\"\n        Parse API response metadata into domain models.\n\n        Must be implemented by all subclasses to transform raw API\n        responses into typed domain objects.\n\n        Args:\n            metadata: Raw API response (dict, str, etc.)\n\n        Returns:\n            Parsed domain objects (List[Anime], List[Torrent], etc.)\n\n        Raises:\n            NotImplementedError: If not overridden in subclass\n        \"\"\"\n        raise NotImplementedError(\"parse_api_metadata must be implemented in subclasses\")\n</code></pre>"},{"location":"reference/services/parsers/base_parser/#anifeed.services.parsers.base_parser.BaseParser.__init__","title":"<code>__init__(logger=None)</code>","text":"<p>Initialize base parser with logger.</p> <p>Parameters:</p> Name Type Description Default <code>logger</code> <p>Optional logger (defaults to namespaced logger)</p> <code>None</code> Source code in <code>src/anifeed/services/parsers/base_parser.py</code> <pre><code>def __init__(self, logger=None):\n    \"\"\"\n    Initialize base parser with logger.\n\n    Args:\n        logger: Optional logger (defaults to namespaced logger)\n    \"\"\"\n    self.logger = logger or get_logger(f\"anifeed.services.{self.__class__.__name__}\")\n</code></pre>"},{"location":"reference/services/parsers/base_parser/#anifeed.services.parsers.base_parser.BaseParser.parse_api_metadata","title":"<code>parse_api_metadata(metadata)</code>","text":"<p>Parse API response metadata into domain models.</p> <p>Must be implemented by all subclasses to transform raw API responses into typed domain objects.</p> <p>Parameters:</p> Name Type Description Default <code>metadata</code> <code>Any</code> <p>Raw API response (dict, str, etc.)</p> required <p>Returns:</p> Type Description <p>Parsed domain objects (List[Anime], List[Torrent], etc.)</p> <p>Raises:</p> Type Description <code>NotImplementedError</code> <p>If not overridden in subclass</p> Source code in <code>src/anifeed/services/parsers/base_parser.py</code> <pre><code>def parse_api_metadata(self, metadata: Any):\n    \"\"\"\n    Parse API response metadata into domain models.\n\n    Must be implemented by all subclasses to transform raw API\n    responses into typed domain objects.\n\n    Args:\n        metadata: Raw API response (dict, str, etc.)\n\n    Returns:\n        Parsed domain objects (List[Anime], List[Torrent], etc.)\n\n    Raises:\n        NotImplementedError: If not overridden in subclass\n    \"\"\"\n    raise NotImplementedError(\"parse_api_metadata must be implemented in subclasses\")\n</code></pre>"},{"location":"reference/services/parsers/mal_parser/","title":"Mal Parser","text":""},{"location":"reference/services/parsers/mal_parser/#anifeed.services.parsers.mal_parser","title":"<code>anifeed.services.parsers.mal_parser</code>","text":"<p>MyAnimeList REST API response parser.</p> <p>This module parses MAL REST API responses into Anime domain objects.</p>"},{"location":"reference/services/parsers/mal_parser/#anifeed.services.parsers.mal_parser.MalParser","title":"<code>MalParser</code>","text":"<p>               Bases: <code>BaseParser</code></p> <p>Parser for MyAnimeList REST API responses.</p> <p>Extracts anime metadata from MAL's REST API response structure and converts it into Anime domain objects.</p> Example <p>parser = MalParser() response = {\"data\": [{\"node\": {...}}, ...]} anime_list = parser.parse_api_metadata(response)</p> Source code in <code>src/anifeed/services/parsers/mal_parser.py</code> <pre><code>class MalParser(BaseParser):\n    \"\"\"\n    Parser for MyAnimeList REST API responses.\n\n    Extracts anime metadata from MAL's REST API response structure and\n    converts it into Anime domain objects.\n\n    Example:\n        &gt;&gt;&gt; parser = MalParser()\n        &gt;&gt;&gt; response = {\"data\": [{\"node\": {...}}, ...]}\n        &gt;&gt;&gt; anime_list = parser.parse_api_metadata(response)\n    \"\"\"\n\n    def parse_api_metadata(self, metadata: Dict[Any, Any]) -&gt; List[Anime]:\n        \"\"\"\n        Parse MAL REST API response into Anime objects.\n\n        Extracts anime entries from the MAL response and maps them to\n        domain Anime objects, handling MAL's specific field naming.\n\n        Args:\n            metadata: Raw REST API response dictionary\n\n        Returns:\n            List of Anime objects extracted from the response\n\n        Example:\n            &gt;&gt;&gt; parser = MalParser()\n            &gt;&gt;&gt; data = {\n            ...     \"data\": [{\n            ...         \"node\": {\n            ...             \"title\": \"Anime Title\",\n            ...             \"alternative_titles\": {\"en\": \"English Title\"},\n            ...             \"num_episodes\": 24,\n            ...             \"status\": \"finished_airing\"\n            ...         }\n            ...     }]\n            ... }\n            &gt;&gt;&gt; anime_list = parser.parse_api_metadata(data)\n        \"\"\"\n        metadata = DictWrangler.find_value_recursively(\n            data=metadata, target_key=\"data\")\n        res = [\n            Anime(\n                anime_id=DictWrangler.find_value_recursively(x, \"id\"),\n                source=self.__class__.__name__,\n                title_romaji=DictWrangler.find_value_recursively(x, \"title\"),\n                title_english=DictWrangler.find_value_recursively(x, \"en\"),\n                episodes=DictWrangler.find_value_recursively(x, \"num_episodes\"),\n                status=DictWrangler.find_value_recursively(x, \"status\"),\n                )\n            for x in metadata]\n\n        return res\n</code></pre>"},{"location":"reference/services/parsers/mal_parser/#anifeed.services.parsers.mal_parser.MalParser.parse_api_metadata","title":"<code>parse_api_metadata(metadata)</code>","text":"<p>Parse MAL REST API response into Anime objects.</p> <p>Extracts anime entries from the MAL response and maps them to domain Anime objects, handling MAL's specific field naming.</p> <p>Parameters:</p> Name Type Description Default <code>metadata</code> <code>Dict[Any, Any]</code> <p>Raw REST API response dictionary</p> required <p>Returns:</p> Type Description <code>List[Anime]</code> <p>List of Anime objects extracted from the response</p> Example <p>parser = MalParser() data = { ...     \"data\": [{ ...         \"node\": { ...             \"title\": \"Anime Title\", ...             \"alternative_titles\": {\"en\": \"English Title\"}, ...             \"num_episodes\": 24, ...             \"status\": \"finished_airing\" ...         } ...     }] ... } anime_list = parser.parse_api_metadata(data)</p> Source code in <code>src/anifeed/services/parsers/mal_parser.py</code> <pre><code>def parse_api_metadata(self, metadata: Dict[Any, Any]) -&gt; List[Anime]:\n    \"\"\"\n    Parse MAL REST API response into Anime objects.\n\n    Extracts anime entries from the MAL response and maps them to\n    domain Anime objects, handling MAL's specific field naming.\n\n    Args:\n        metadata: Raw REST API response dictionary\n\n    Returns:\n        List of Anime objects extracted from the response\n\n    Example:\n        &gt;&gt;&gt; parser = MalParser()\n        &gt;&gt;&gt; data = {\n        ...     \"data\": [{\n        ...         \"node\": {\n        ...             \"title\": \"Anime Title\",\n        ...             \"alternative_titles\": {\"en\": \"English Title\"},\n        ...             \"num_episodes\": 24,\n        ...             \"status\": \"finished_airing\"\n        ...         }\n        ...     }]\n        ... }\n        &gt;&gt;&gt; anime_list = parser.parse_api_metadata(data)\n    \"\"\"\n    metadata = DictWrangler.find_value_recursively(\n        data=metadata, target_key=\"data\")\n    res = [\n        Anime(\n            anime_id=DictWrangler.find_value_recursively(x, \"id\"),\n            source=self.__class__.__name__,\n            title_romaji=DictWrangler.find_value_recursively(x, \"title\"),\n            title_english=DictWrangler.find_value_recursively(x, \"en\"),\n            episodes=DictWrangler.find_value_recursively(x, \"num_episodes\"),\n            status=DictWrangler.find_value_recursively(x, \"status\"),\n            )\n        for x in metadata]\n\n    return res\n</code></pre>"},{"location":"reference/services/parsers/nyaa_parser/","title":"Nyaa Parser","text":""},{"location":"reference/services/parsers/nyaa_parser/#anifeed.services.parsers.nyaa_parser","title":"<code>anifeed.services.parsers.nyaa_parser</code>","text":"<p>Nyaa.si HTML response parser.</p> <p>This module parses Nyaa.si search result HTML into Torrent domain objects.</p>"},{"location":"reference/services/parsers/nyaa_parser/#anifeed.services.parsers.nyaa_parser.NyaaParser","title":"<code>NyaaParser</code>","text":"<p>               Bases: <code>BaseParser</code></p> <p>Parser for Nyaa.si HTML search results.</p> <p>Scrapes Nyaa.si search result pages and extracts torrent metadata into Torrent domain objects.</p> Example <p>parser = NyaaParser() html = \"...\"  # Nyaa search results torrents = parser.parse_api_metadata(html)</p> Source code in <code>src/anifeed/services/parsers/nyaa_parser.py</code> <pre><code>class NyaaParser(BaseParser):\n    \"\"\"\n    Parser for Nyaa.si HTML search results.\n\n    Scrapes Nyaa.si search result pages and extracts torrent metadata\n    into Torrent domain objects.\n\n    Example:\n        &gt;&gt;&gt; parser = NyaaParser()\n        &gt;&gt;&gt; html = \"&lt;html&gt;...&lt;/html&gt;\"  # Nyaa search results\n        &gt;&gt;&gt; torrents = parser.parse_api_metadata(html)\n    \"\"\"\n\n    def parse_api_metadata(self, metadata: str) -&gt; List[Torrent]:\n        \"\"\"\n        Parse Nyaa.si HTML into Torrent objects.\n\n        Scrapes the search results table from Nyaa HTML and extracts\n        torrent information (title, download URL, size, seeders, leechers).\n\n        Args:\n            metadata: Raw HTML string from Nyaa.si search\n\n        Returns:\n            List of Torrent objects extracted from the HTML\n\n        Raises:\n            AttributeError: If HTML structure is unexpected (no tbody)\n\n        Example:\n            &gt;&gt;&gt; parser = NyaaParser()\n            &gt;&gt;&gt; html = '''\n            ... &lt;table class=\"torrent-list\"&gt;\n            ...   &lt;tbody&gt;\n            ...     &lt;tr&gt;\n            ...       &lt;td&gt;&lt;/td&gt;\n            ...       &lt;td&gt;&lt;a&gt;[SubsPlease] Anime - 01 [1080p].mkv&lt;/a&gt;&lt;/td&gt;\n            ...       &lt;td&gt;&lt;a href=\"/download/123.torrent\"&gt;\u2b07&lt;/a&gt;&lt;/td&gt;\n            ...       &lt;td&gt;1.3 GiB&lt;/td&gt;\n            ...       &lt;td&gt;&lt;/td&gt;\n            ...       &lt;td&gt;150&lt;/td&gt;\n            ...       &lt;td&gt;25&lt;/td&gt;\n            ...     &lt;/tr&gt;\n            ...   &lt;/tbody&gt;\n            ... &lt;/table&gt;\n            ... '''\n            &gt;&gt;&gt; torrents = parser.parse_api_metadata(html)\n            &gt;&gt;&gt; print(torrents[0].seeders)\n            150\n        \"\"\"\n        soup = BeautifulSoup(metadata, 'html.parser')\n        res = []\n        for row in soup.find('tbody').find_all('tr'):\n            content = row.find_all(\"td\")\n            url_link = [x[\"href\"] for x in content[1].find_all(\"a\")]\n            download_links = [x[\"href\"] for x in content[2].find_all(\"a\")]\n            res.append(\n                Torrent(\n                    torrent_id=re.search(\"/view/([0-9]+)\", url_link[0]).group(1),\n                    title=content[1].text.replace(\"\\n\", \"\"),\n                    download_url=download_links[0],\n                    size=content[3].text,\n                    seeders=int(content[5].text),\n                    leechers=int(content[6].text),\n                ))\n        return res\n</code></pre>"},{"location":"reference/services/parsers/nyaa_parser/#anifeed.services.parsers.nyaa_parser.NyaaParser.parse_api_metadata","title":"<code>parse_api_metadata(metadata)</code>","text":"<p>Parse Nyaa.si HTML into Torrent objects.</p> <p>Scrapes the search results table from Nyaa HTML and extracts torrent information (title, download URL, size, seeders, leechers).</p> <p>Parameters:</p> Name Type Description Default <code>metadata</code> <code>str</code> <p>Raw HTML string from Nyaa.si search</p> required <p>Returns:</p> Type Description <code>List[Torrent]</code> <p>List of Torrent objects extracted from the HTML</p> <p>Raises:</p> Type Description <code>AttributeError</code> <p>If HTML structure is unexpected (no tbody)</p> Example <p>parser = NyaaParser() html = ''' ...  ...    ...      ...        ...       [SubsPlease] Anime - 01 [1080p].mkv ...       \u2b07 ...       1.3 GiB ...        ...       150 ...       25 ...      ...    ...  ... ''' torrents = parser.parse_api_metadata(html) print(torrents[0].seeders) 150</p> Source code in <code>src/anifeed/services/parsers/nyaa_parser.py</code> <pre><code>def parse_api_metadata(self, metadata: str) -&gt; List[Torrent]:\n    \"\"\"\n    Parse Nyaa.si HTML into Torrent objects.\n\n    Scrapes the search results table from Nyaa HTML and extracts\n    torrent information (title, download URL, size, seeders, leechers).\n\n    Args:\n        metadata: Raw HTML string from Nyaa.si search\n\n    Returns:\n        List of Torrent objects extracted from the HTML\n\n    Raises:\n        AttributeError: If HTML structure is unexpected (no tbody)\n\n    Example:\n        &gt;&gt;&gt; parser = NyaaParser()\n        &gt;&gt;&gt; html = '''\n        ... &lt;table class=\"torrent-list\"&gt;\n        ...   &lt;tbody&gt;\n        ...     &lt;tr&gt;\n        ...       &lt;td&gt;&lt;/td&gt;\n        ...       &lt;td&gt;&lt;a&gt;[SubsPlease] Anime - 01 [1080p].mkv&lt;/a&gt;&lt;/td&gt;\n        ...       &lt;td&gt;&lt;a href=\"/download/123.torrent\"&gt;\u2b07&lt;/a&gt;&lt;/td&gt;\n        ...       &lt;td&gt;1.3 GiB&lt;/td&gt;\n        ...       &lt;td&gt;&lt;/td&gt;\n        ...       &lt;td&gt;150&lt;/td&gt;\n        ...       &lt;td&gt;25&lt;/td&gt;\n        ...     &lt;/tr&gt;\n        ...   &lt;/tbody&gt;\n        ... &lt;/table&gt;\n        ... '''\n        &gt;&gt;&gt; torrents = parser.parse_api_metadata(html)\n        &gt;&gt;&gt; print(torrents[0].seeders)\n        150\n    \"\"\"\n    soup = BeautifulSoup(metadata, 'html.parser')\n    res = []\n    for row in soup.find('tbody').find_all('tr'):\n        content = row.find_all(\"td\")\n        url_link = [x[\"href\"] for x in content[1].find_all(\"a\")]\n        download_links = [x[\"href\"] for x in content[2].find_all(\"a\")]\n        res.append(\n            Torrent(\n                torrent_id=re.search(\"/view/([0-9]+)\", url_link[0]).group(1),\n                title=content[1].text.replace(\"\\n\", \"\"),\n                download_url=download_links[0],\n                size=content[3].text,\n                seeders=int(content[5].text),\n                leechers=int(content[6].text),\n            ))\n    return res\n</code></pre>"},{"location":"reference/utils/commons/","title":"Commons","text":""},{"location":"reference/utils/commons/#anifeed.utils.commons","title":"<code>anifeed.utils.commons</code>","text":"<p>Common utility classes for path handling, dictionary operations, and config parsing.</p> <p>This module provides reusable utilities used throughout the application.</p>"},{"location":"reference/utils/commons/#anifeed.utils.commons.UniversalPath","title":"<code>UniversalPath</code>","text":"<p>Cross-platform path resolver relative to the anifeed package root.</p> <p>Provides a unified way to construct absolute paths relative to the src/anifeed directory, regardless of the current working directory.</p> <p>Attributes:</p> Name Type Description <code>_path</code> <p>The resolved absolute path as a string</p> <p>Example:     &gt;&gt;&gt; path = UniversalPath(\"config.toml\")     &gt;&gt;&gt; print(path)     '/absolute/path/to/anifeed/config.toml'     &gt;&gt;&gt; full_path = path / \"subdir\" / \"file.txt\"</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>class UniversalPath:\n    \"\"\"\n    Cross-platform path resolver relative to the anifeed package root.\n\n    Provides a unified way to construct absolute paths relative to the\n    src/anifeed directory, regardless of the current working directory.\n\n    Attributes:\n        _path: The resolved absolute path as a string\n    Example:\n        &gt;&gt;&gt; path = UniversalPath(\"config.toml\")\n        &gt;&gt;&gt; print(path)\n        '/absolute/path/to/anifeed/config.toml'\n        &gt;&gt;&gt; full_path = path / \"subdir\" / \"file.txt\"\n    \"\"\"\n\n    def __init__(self, path_string: Union[str, 'Path']):\n        \"\"\"\n        Initialize a path relative to the anifeed package root.\n        Args:\n            path_string: Relative path from src/anifeed/ directory\n        \"\"\"\n        base_dir = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n        self._path = os.path.join(base_dir, str(path_string))\n\n    def __str__(self) -&gt; str:\n        \"\"\"Return the absolute path as a string.\"\"\"\n        return self._path\n\n    def __repr__(self) -&gt; str:\n        \"\"\"Return a representation showing the path.\"\"\"\n        return f'Path(\"{self._path}\")'\n\n    def __fspath__(self) -&gt; str:\n        \"\"\"Support for os.fspath() protocol.\"\"\"\n        return self._path\n\n    def __truediv__(self, other: Union[str, 'Path']) -&gt; 'Path':\n        \"\"\"\n        Join paths using the / operator.\n\n        Args:\n            other: Path component to append\n\n        Returns:\n            New UniversalPath with joined path\n\n        Example:\n            &gt;&gt;&gt; base = UniversalPath(\"data\")\n            &gt;&gt;&gt; full = base / \"configs\" / \"app.toml\"\n        \"\"\"\n        other_path = str(other)\n        retVal = os.path.join(self._path, other_path)\n        return UniversalPath(retVal)\n</code></pre>"},{"location":"reference/utils/commons/#anifeed.utils.commons.UniversalPath.__init__","title":"<code>__init__(path_string)</code>","text":"<p>Initialize a path relative to the anifeed package root. Args:     path_string: Relative path from src/anifeed/ directory</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>def __init__(self, path_string: Union[str, 'Path']):\n    \"\"\"\n    Initialize a path relative to the anifeed package root.\n    Args:\n        path_string: Relative path from src/anifeed/ directory\n    \"\"\"\n    base_dir = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n    self._path = os.path.join(base_dir, str(path_string))\n</code></pre>"},{"location":"reference/utils/commons/#anifeed.utils.commons.UniversalPath.__str__","title":"<code>__str__()</code>","text":"<p>Return the absolute path as a string.</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>def __str__(self) -&gt; str:\n    \"\"\"Return the absolute path as a string.\"\"\"\n    return self._path\n</code></pre>"},{"location":"reference/utils/commons/#anifeed.utils.commons.UniversalPath.__repr__","title":"<code>__repr__()</code>","text":"<p>Return a representation showing the path.</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>def __repr__(self) -&gt; str:\n    \"\"\"Return a representation showing the path.\"\"\"\n    return f'Path(\"{self._path}\")'\n</code></pre>"},{"location":"reference/utils/commons/#anifeed.utils.commons.UniversalPath.__fspath__","title":"<code>__fspath__()</code>","text":"<p>Support for os.fspath() protocol.</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>def __fspath__(self) -&gt; str:\n    \"\"\"Support for os.fspath() protocol.\"\"\"\n    return self._path\n</code></pre>"},{"location":"reference/utils/commons/#anifeed.utils.commons.UniversalPath.__truediv__","title":"<code>__truediv__(other)</code>","text":"<p>Join paths using the / operator.</p> <p>Parameters:</p> Name Type Description Default <code>other</code> <code>Union[str, Path]</code> <p>Path component to append</p> required <p>Returns:</p> Type Description <code>Path</code> <p>New UniversalPath with joined path</p> Example <p>base = UniversalPath(\"data\") full = base / \"configs\" / \"app.toml\"</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>def __truediv__(self, other: Union[str, 'Path']) -&gt; 'Path':\n    \"\"\"\n    Join paths using the / operator.\n\n    Args:\n        other: Path component to append\n\n    Returns:\n        New UniversalPath with joined path\n\n    Example:\n        &gt;&gt;&gt; base = UniversalPath(\"data\")\n        &gt;&gt;&gt; full = base / \"configs\" / \"app.toml\"\n    \"\"\"\n    other_path = str(other)\n    retVal = os.path.join(self._path, other_path)\n    return UniversalPath(retVal)\n</code></pre>"},{"location":"reference/utils/commons/#anifeed.utils.commons.DictWrangler","title":"<code>DictWrangler</code>","text":"<p>Utility for navigating nested dictionary and list structures.</p> <p>Provides recursive search capabilities for finding values in deeply nested JSON-like data structures.</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>class DictWrangler:\n    \"\"\"\n    Utility for navigating nested dictionary and list structures.\n\n    Provides recursive search capabilities for finding values in deeply\n    nested JSON-like data structures.\n    \"\"\"\n\n    @classmethod\n    def find_value_recursively(cls, data, target_key):\n        \"\"\"\n        Recursively search for a key in nested dictionaries and lists.\n\n        Performs depth-first search through nested data structures to find\n        the first occurrence of a key.\n\n        Args:\n            data: The data structure to search (dict, list, or primitive)\n            target_key: The key to search for\n\n        Returns:\n            The value associated with target_key, or None if not found\n\n        Example:\n            &gt;&gt;&gt; data = {\"a\": {\"b\": {\"c\": \"value\"}}}\n            &gt;&gt;&gt; DictWrangler.find_value_recursively(data, \"c\")\n            'value'\n\n            &gt;&gt;&gt; nested = {\"items\": [{\"id\": 1}, {\"id\": 2, \"name\": \"test\"}]}\n            &gt;&gt;&gt; DictWrangler.find_value_recursively(nested, \"name\")\n            'test'\n        \"\"\"\n        if isinstance(data, dict):\n            if target_key in data:\n                return data[target_key]\n\n            for key, value in data.items():\n                result = DictWrangler.find_value_recursively(value, target_key)\n                if result is not None:\n                    return result\n\n        elif isinstance(data, list):\n            for item in data:\n                result = DictWrangler.find_value_recursively(item, target_key)\n                if result is not None:\n                    return result\n        return None\n</code></pre>"},{"location":"reference/utils/commons/#anifeed.utils.commons.DictWrangler.find_value_recursively","title":"<code>find_value_recursively(data, target_key)</code>  <code>classmethod</code>","text":"<p>Recursively search for a key in nested dictionaries and lists.</p> <p>Performs depth-first search through nested data structures to find the first occurrence of a key.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <p>The data structure to search (dict, list, or primitive)</p> required <code>target_key</code> <p>The key to search for</p> required <p>Returns:</p> Type Description <p>The value associated with target_key, or None if not found</p> Example <p>data = {\"a\": {\"b\": {\"c\": \"value\"}}} DictWrangler.find_value_recursively(data, \"c\") 'value'</p> <p>nested = {\"items\": [{\"id\": 1}, {\"id\": 2, \"name\": \"test\"}]} DictWrangler.find_value_recursively(nested, \"name\") 'test'</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>@classmethod\ndef find_value_recursively(cls, data, target_key):\n    \"\"\"\n    Recursively search for a key in nested dictionaries and lists.\n\n    Performs depth-first search through nested data structures to find\n    the first occurrence of a key.\n\n    Args:\n        data: The data structure to search (dict, list, or primitive)\n        target_key: The key to search for\n\n    Returns:\n        The value associated with target_key, or None if not found\n\n    Example:\n        &gt;&gt;&gt; data = {\"a\": {\"b\": {\"c\": \"value\"}}}\n        &gt;&gt;&gt; DictWrangler.find_value_recursively(data, \"c\")\n        'value'\n\n        &gt;&gt;&gt; nested = {\"items\": [{\"id\": 1}, {\"id\": 2, \"name\": \"test\"}]}\n        &gt;&gt;&gt; DictWrangler.find_value_recursively(nested, \"name\")\n        'test'\n    \"\"\"\n    if isinstance(data, dict):\n        if target_key in data:\n            return data[target_key]\n\n        for key, value in data.items():\n            result = DictWrangler.find_value_recursively(value, target_key)\n            if result is not None:\n                return result\n\n    elif isinstance(data, list):\n        for item in data:\n            result = DictWrangler.find_value_recursively(item, target_key)\n            if result is not None:\n                return result\n    return None\n</code></pre>"},{"location":"reference/utils/commons/#anifeed.utils.commons.TomlParser","title":"<code>TomlParser</code>","text":"<p>TOML configuration file parser.</p> <p>Provides a simple interface for reading TOML configuration files from the anifeed package directory.</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>class TomlParser:\n    \"\"\"\n    TOML configuration file parser.\n\n    Provides a simple interface for reading TOML configuration files\n    from the anifeed package directory.\n    \"\"\"\n\n    @classmethod\n    def get_config(cls, table_name: str) -&gt; Dict:\n        \"\"\"\n        Load a specific table from config.toml.\n\n        Args:\n            table_name: Name of the top-level TOML table to retrieve\n                       (e.g., \"application\", \"nyaa\")\n               Returns:\n            Dictionary containing the specified configuration table\n\n        Raises:\n            FileNotFoundError: If config.toml doesn't exist\n            tomllib.TOMLDecodeError: If config.toml is malformed\n\n        Example:\n            &gt;&gt;&gt; app_config = TomlParser.get_config(\"application\")\n            &gt;&gt;&gt; print(app_config[\"user\"])\n            'myusername'\n        \"\"\"\n        with open(file=UniversalPath(\"config.toml\"), mode=\"rb\") as f:\n            retVal = tomllib.load(f).get(table_name)\n        return retVal\n</code></pre>"},{"location":"reference/utils/commons/#anifeed.utils.commons.TomlParser.get_config","title":"<code>get_config(table_name)</code>  <code>classmethod</code>","text":"<p>Load a specific table from config.toml.</p> <p>Parameters:</p> Name Type Description Default <code>table_name</code> <code>str</code> <p>Name of the top-level TOML table to retrieve        (e.g., \"application\", \"nyaa\") Returns:</p> required <p>Raises:</p> Type Description <code>FileNotFoundError</code> <p>If config.toml doesn't exist</p> <code>TOMLDecodeError</code> <p>If config.toml is malformed</p> Example <p>app_config = TomlParser.get_config(\"application\") print(app_config[\"user\"]) 'myusername'</p> Source code in <code>src/anifeed/utils/commons.py</code> <pre><code>@classmethod\ndef get_config(cls, table_name: str) -&gt; Dict:\n    \"\"\"\n    Load a specific table from config.toml.\n\n    Args:\n        table_name: Name of the top-level TOML table to retrieve\n                   (e.g., \"application\", \"nyaa\")\n           Returns:\n        Dictionary containing the specified configuration table\n\n    Raises:\n        FileNotFoundError: If config.toml doesn't exist\n        tomllib.TOMLDecodeError: If config.toml is malformed\n\n    Example:\n        &gt;&gt;&gt; app_config = TomlParser.get_config(\"application\")\n        &gt;&gt;&gt; print(app_config[\"user\"])\n        'myusername'\n    \"\"\"\n    with open(file=UniversalPath(\"config.toml\"), mode=\"rb\") as f:\n        retVal = tomllib.load(f).get(table_name)\n    return retVal\n</code></pre>"},{"location":"reference/utils/http_client/","title":"Http Client","text":""},{"location":"reference/utils/http_client/#anifeed.utils.http_client","title":"<code>anifeed.utils.http_client</code>","text":"<p>HTTP client with retry logic and session management.</p> <p>This module provides a robust HTTP client with automatic retries, connection pooling, and request logging.</p>"},{"location":"reference/utils/http_client/#anifeed.utils.http_client.HttpClient","title":"<code>HttpClient</code>","text":"<p>Configurable HTTP client with retry logic and base URL support.</p> <p>Provides a simplified interface for making HTTP requests with automatic retries on failures, connection pooling, and request logging.</p> <p>Attributes:</p> Name Type Description <code>base_url</code> <p>Optional base URL prepended to all relative paths</p> <code>session</code> <p>Configured requests Session with retry logic</p> <code>logger</code> <p>Logger instance for request/response logging</p> <p>Example:     &gt;&gt;&gt; client = HttpClient(base_url=\"https://api.example.com\")     &gt;&gt;&gt; response = client.get(\"/users/123\")     &gt;&gt;&gt; data = response.json()</p> Source code in <code>src/anifeed/utils/http_client.py</code> <pre><code>class HttpClient:\n    \"\"\"\n    Configurable HTTP client with retry logic and base URL support.\n\n    Provides a simplified interface for making HTTP requests with automatic\n    retries on failures, connection pooling, and request logging.\n\n    Attributes:\n        base_url: Optional base URL prepended to all relative paths\n        session: Configured requests Session with retry logic\n        logger: Logger instance for request/response logging\n    Example:\n        &gt;&gt;&gt; client = HttpClient(base_url=\"https://api.example.com\")\n        &gt;&gt;&gt; response = client.get(\"/users/123\")\n        &gt;&gt;&gt; data = response.json()\n    \"\"\"\n\n    def __init__(self,\n                 base_url: Optional[str] = None,\n                 session: Optional[requests.Session] = None,\n                 logger=None\n                 ):\n        \"\"\"\n        Initialize HTTP client with optional base URL and session.\n        Args:\n            base_url: Optional base URL for all requests\n            session: Optional custom requests.Session (creates default if None)\n            logger: Optional logger instance (creates default if None)\n        \"\"\"\n        self.base_url = base_url\n        self.session = session or self._create_session()\n        self.logger = logger or get_logger(f\"anifeed.utils.{self.__class__.__name__}\")\n\n    def _create_session(self) -&gt; requests.Session:\n        \"\"\"\n        Create a requests Session with retry configuration.\n        Configures automatic retries for:\n        - Network failures (max 3 attempts)\n        - 500-level HTTP errors (Server errors)\n        - Exponential backoff (0.3s base factor)\n        Returns:\n            Configured requests.Session instance\n        \"\"\"\n        s = requests.Session()\n        retries = Retry(total=3, backoff_factor=0.3, status_forcelist={500, 502, 503, 504})\n        adapter = HTTPAdapter(max_retries=retries)\n        s.mount(\"http://\", adapter)\n        s.mount(\"https://\", adapter)\n        return s\n\n    def _build_url(self, path: Optional[str]) -&gt; str:\n        \"\"\"\n        Construct full URL from base URL and path.\n\n        Args:\n            path: Relative or absolute path\n\n        Returns:\n            Full URL string\n\n        Example:\n            &gt;&gt;&gt; client = HttpClient(base_url=\"https://api.example.com\")\n            &gt;&gt;&gt; client._build_url(\"/users\")\n            'https://api.example.com/users'\n            &gt;&gt;&gt; client._build_url(\"https://other.com/data\")\n            'https://other.com/data'\n        \"\"\"\n        if not path:\n            return self.base_url or \"\"\n        if self.base_url and not path.startswith(\"http\"):\n            return f\"{self.base_url.rstrip('/')}/{path.lstrip('/')}\"\n        return path\n\n    def get(self, path: Optional[str] = None, **kwargs) -&gt; requests.Response:\n        \"\"\"\n        Perform HTTP GET request.\n\n        Args:\n            path: URL path (relative to base_url or absolute)\n            **kwargs: Additional arguments passed to requests.get()\n                     (params, headers, timeout, etc.)\n             Returns:\n            requests.Response object\n\n        Example:\n            &gt;&gt;&gt; client = HttpClient(base_url=\"https://api.example.com\")\n            &gt;&gt;&gt; response = client.get(\"/users\", params={\"page\": 1})\n            &gt;&gt;&gt; response.raise_for_status()\n        \"\"\"\n        url = self._build_url(path)\n        self.logger.debug(\"HTTP GET %s %s\", url, kwargs)\n        return self.session.get(url, **kwargs)\n\n    def post(self, path: Optional[str] = None, json: Any = None, data: Any = None, **kwargs) -&gt; requests.Response:\n        \"\"\"\n        Perform HTTP POST request.\n        Args:\n            path: URL path (relative to base_url or absolute)\n            json: Optional JSON payload (auto-serialized and sets Content-Type)\n            data: Optional form data or bytes\n            **kwargs: Additional arguments passed to requests.post()\n\n        Returns:\n            requests.Response object\n\n        Example:\n            &gt;&gt;&gt; client = HttpClient(base_url=\"https://api.example.com\")\n            &gt;&gt;&gt; response = client.post(\"/users\", json={\"name\": \"John\"})\n            &gt;&gt;&gt; response.raise_for_status()\n        \"\"\"\n        url = self._build_url(path)\n        self.logger.debug(\"HTTP POST %s json=%s data=%s kwargs=%s\", url, json, data, kwargs)\n        return self.session.post(url, json=json, data=data, **kwargs)\n</code></pre>"},{"location":"reference/utils/http_client/#anifeed.utils.http_client.HttpClient.__init__","title":"<code>__init__(base_url=None, session=None, logger=None)</code>","text":"<p>Initialize HTTP client with optional base URL and session. Args:     base_url: Optional base URL for all requests     session: Optional custom requests.Session (creates default if None)     logger: Optional logger instance (creates default if None)</p> Source code in <code>src/anifeed/utils/http_client.py</code> <pre><code>def __init__(self,\n             base_url: Optional[str] = None,\n             session: Optional[requests.Session] = None,\n             logger=None\n             ):\n    \"\"\"\n    Initialize HTTP client with optional base URL and session.\n    Args:\n        base_url: Optional base URL for all requests\n        session: Optional custom requests.Session (creates default if None)\n        logger: Optional logger instance (creates default if None)\n    \"\"\"\n    self.base_url = base_url\n    self.session = session or self._create_session()\n    self.logger = logger or get_logger(f\"anifeed.utils.{self.__class__.__name__}\")\n</code></pre>"},{"location":"reference/utils/http_client/#anifeed.utils.http_client.HttpClient.get","title":"<code>get(path=None, **kwargs)</code>","text":"<p>Perform HTTP GET request.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Optional[str]</code> <p>URL path (relative to base_url or absolute)</p> <code>None</code> <code>**kwargs</code> <p>Additional arguments passed to requests.get()      (params, headers, timeout, etc.) Returns:</p> <code>{}</code> Example <p>client = HttpClient(base_url=\"https://api.example.com\") response = client.get(\"/users\", params={\"page\": 1}) response.raise_for_status()</p> Source code in <code>src/anifeed/utils/http_client.py</code> <pre><code>def get(self, path: Optional[str] = None, **kwargs) -&gt; requests.Response:\n    \"\"\"\n    Perform HTTP GET request.\n\n    Args:\n        path: URL path (relative to base_url or absolute)\n        **kwargs: Additional arguments passed to requests.get()\n                 (params, headers, timeout, etc.)\n         Returns:\n        requests.Response object\n\n    Example:\n        &gt;&gt;&gt; client = HttpClient(base_url=\"https://api.example.com\")\n        &gt;&gt;&gt; response = client.get(\"/users\", params={\"page\": 1})\n        &gt;&gt;&gt; response.raise_for_status()\n    \"\"\"\n    url = self._build_url(path)\n    self.logger.debug(\"HTTP GET %s %s\", url, kwargs)\n    return self.session.get(url, **kwargs)\n</code></pre>"},{"location":"reference/utils/http_client/#anifeed.utils.http_client.HttpClient.post","title":"<code>post(path=None, json=None, data=None, **kwargs)</code>","text":"<p>Perform HTTP POST request. Args:     path: URL path (relative to base_url or absolute)     json: Optional JSON payload (auto-serialized and sets Content-Type)     data: Optional form data or bytes     **kwargs: Additional arguments passed to requests.post()</p> <p>Returns:</p> Type Description <code>Response</code> <p>requests.Response object</p> Example <p>client = HttpClient(base_url=\"https://api.example.com\") response = client.post(\"/users\", json={\"name\": \"John\"}) response.raise_for_status()</p> Source code in <code>src/anifeed/utils/http_client.py</code> <pre><code>def post(self, path: Optional[str] = None, json: Any = None, data: Any = None, **kwargs) -&gt; requests.Response:\n    \"\"\"\n    Perform HTTP POST request.\n    Args:\n        path: URL path (relative to base_url or absolute)\n        json: Optional JSON payload (auto-serialized and sets Content-Type)\n        data: Optional form data or bytes\n        **kwargs: Additional arguments passed to requests.post()\n\n    Returns:\n        requests.Response object\n\n    Example:\n        &gt;&gt;&gt; client = HttpClient(base_url=\"https://api.example.com\")\n        &gt;&gt;&gt; response = client.post(\"/users\", json={\"name\": \"John\"})\n        &gt;&gt;&gt; response.raise_for_status()\n    \"\"\"\n    url = self._build_url(path)\n    self.logger.debug(\"HTTP POST %s json=%s data=%s kwargs=%s\", url, json, data, kwargs)\n    return self.session.post(url, json=json, data=data, **kwargs)\n</code></pre>"},{"location":"reference/utils/log_utils/","title":"Log Utils","text":""},{"location":"reference/utils/log_utils/#anifeed.utils.log_utils","title":"<code>anifeed.utils.log_utils</code>","text":"<p>Logging configuration and utilities.</p> <p>This module provides centralized logging setup with console and optional file output support.</p>"},{"location":"reference/utils/log_utils/#anifeed.utils.log_utils.configure_root_logger","title":"<code>configure_root_logger(level=logging.INFO, logfile=None)</code>","text":"<p>Configure the root logger with console and optional file output.</p> <p>Sets up logging with a standardized format across all loggers. Includes optional rotating file handler for persistent logs.</p> <p>Parameters:</p> Name Type Description Default <code>level</code> <code>int</code> <p>Logging level (e.g., logging.INFO, logging.DEBUG)</p> <code>INFO</code> <code>logfile</code> <code>Optional[str]</code> <p>Optional path to log file. If provided, enables file logging     with automatic rotation (10MB max, 3 backups)</p> <code>None</code> <p>Returns:</p> Type Description <code>Logger</code> <p>Configured root logger instance</p> Example <p>configure_root_logger(level=logging.DEBUG, logfile=\"app.log\") logger = logging.getLogger(name) logger.info(\"Application started\") 2025-01-01 10:00:00 | INFO     | Application started</p> Source code in <code>src/anifeed/utils/log_utils.py</code> <pre><code>def configure_root_logger(level: int = logging.INFO, logfile: Optional[str] = None) -&gt; logging.Logger:\n    \"\"\"\n    Configure the root logger with console and optional file output.\n\n    Sets up logging with a standardized format across all loggers. Includes\n    optional rotating file handler for persistent logs.\n\n    Args:\n        level: Logging level (e.g., logging.INFO, logging.DEBUG)\n        logfile: Optional path to log file. If provided, enables file logging\n                with automatic rotation (10MB max, 3 backups)\n\n    Returns:\n        Configured root logger instance\n\n    Example:\n        &gt;&gt;&gt; configure_root_logger(level=logging.DEBUG, logfile=\"app.log\")\n        &gt;&gt;&gt; logger = logging.getLogger(__name__)\n        &gt;&gt;&gt; logger.info(\"Application started\")\n        2025-01-01 10:00:00 | INFO     | Application started\n    \"\"\"\n    root = logging.getLogger()\n\n    # Avoid reconfiguring if already set up\n    if root.handlers:\n        return root\n\n    root.setLevel(level)\n    format = logging.Formatter(\n        '%(asctime)s | %(levelname)-8s | %(message)s')\n\n    # Console handler\n    handler = logging.StreamHandler()\n    handler.setFormatter(format)\n    root.addHandler(handler)\n\n    # Optional file handler with rotation\n    if logfile:\n        file_handler = RotatingFileHandler(\n            logfile,\n            maxBytes=10_000_000,  # 10 MB\n            backupCount=3\n        )\n        file_handler.setFormatter(format)\n        root.addHandler(file_handler)\n\n    return root\n</code></pre>"},{"location":"reference/utils/log_utils/#anifeed.utils.log_utils.get_logger","title":"<code>get_logger(name)</code>","text":"<p>Get a logger instance with the specified name.</p> <p>Creates or retrieves a logger with the given name, enabling module-specific logging and filtering.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Logger name (typically name or \"package.module.Class\")</p> required <p>Returns:</p> Type Description <code>Logger</code> <p>Logger instance</p> Example <p>logger = get_logger(\"anifeed.services.AnimeService\") logger.info(\"Service initialized\") logger.debug(\"Debug info with namespace\")</p> Source code in <code>src/anifeed/utils/log_utils.py</code> <pre><code>def get_logger(name: str) -&gt; logging.Logger:\n    \"\"\"\n    Get a logger instance with the specified name.\n\n    Creates or retrieves a logger with the given name, enabling\n    module-specific logging and filtering.\n\n    Args:\n        name: Logger name (typically __name__ or \"package.module.Class\")\n\n    Returns:\n        Logger instance\n\n    Example:\n        &gt;&gt;&gt; logger = get_logger(\"anifeed.services.AnimeService\")\n        &gt;&gt;&gt; logger.info(\"Service initialized\")\n        &gt;&gt;&gt; logger.debug(\"Debug info with namespace\")\n    \"\"\"\n    return logging.getLogger(name)\n</code></pre>"}]}